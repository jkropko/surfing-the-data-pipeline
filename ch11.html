
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>11. Static Data Visualizations &#8212; Surfing the Data Pipeline with Python</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'ch11';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="12. Interactive Data Visualizations and Dashboards" href="ch12.html" />
    <link rel="prev" title="10. Exploratory Data Analysis" href="ch10.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/surf.jpg" class="logo__image only-light" alt="Surfing the Data Pipeline with Python - Home"/>
    <script>document.write(`<img src="_static/surf.jpg" class="logo__image only-dark" alt="Surfing the Data Pipeline with Python - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Surfing the Data Pipeline with Python
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ch1.html">1. Getting Yourself Unstuck</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Get Data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ch2.html">2. Loading Data from Electronic Data Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch3.html">3. Loading, Converting, and Writing JSON Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch4.html">4. Acquiring Data from APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch5.html">5. Web Scraping Using <code class="docutils literal notranslate"><span class="pre">BeautifulSoup</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="ch6.html">6. Creating and Connecting to Databases</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Wrangle Data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ch7.html">7. Database Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch8.html">8. Data Wrangling with <code class="docutils literal notranslate"><span class="pre">pandas</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="ch9.html">9. Reshaping and Merging Data and Working with Strings, Dates, and Times</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Explore and Communicate Data</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ch10.html">10. Exploratory Data Analysis</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">11. Static Data Visualizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch12.html">12. Interactive Data Visualizations and Dashboards</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="docker.html">Virtual Environments and Containers</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/ch11.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Static Data Visualizations</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction-what-makes-for-a-good-data-visualization">11.1. Introduction: What Makes For a Good Data Visualization?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#aesthetics-data-and-scales">11.1.1. Aesthetics, Data, and Scales</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#edward-tufte-s-fundamental-principles-of-analytical-design">11.1.2. Edward Tufte’s “Fundamental Principles of Analytical Design”</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#claus-o-wilke-s-guide-to-telling-a-story-and-making-a-point">11.1.3. Claus O. Wilke’s Guide to Telling a Story and Making a Point</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-not-to-lie-with-statistics">11.1.4. How (not) to Lie with Statistics</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-not-pie-charts">11.1.5. Why Not Pie Charts?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-data-visualizations-in-python">11.2. Creating Data Visualizations in Python</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#barplots-and-how-to-use-matplotlib-seaborn-and-the-dataframe-plot-method">11.2.1. Barplots and How to Use <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>, and the Dataframe <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> Method</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#vertical-and-horizontal-barplots-figure-size-labels-titles-and-colors">11.2.1.1. Vertical and Horizontal Barplots, Figure Size, Labels, Titles, and Colors</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#barplots-for-statistics-other-than-frequencies">11.2.1.2. Barplots for Statistics Other Than Frequencies</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#annotating-bars-with-values">11.2.1.3. Annotating Bars with Values</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#grouped-and-stacked-bars">11.2.1.4. Grouped and Stacked Bars</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#placing-graphs-within-grids">11.2.1.5. Placing Graphs Within Grids</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#saving-a-figure-as-a-local-file">11.2.1.6. Saving a Figure as a Local File</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scatterplots">11.2.2. Scatterplots</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#using-colors-shapes-and-transparency-to-annotate-scatterplots">11.2.2.1. Using Colors, Shapes, and Transparency to Annotate Scatterplots</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#including-lines-of-best-fit">11.2.2.2. Including Lines of Best Fit</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scatterplot-grids-and-matrices">11.2.2.3. Scatterplot Grids and Matrices</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#line-plots">11.2.3. Line Plots</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#distributional-graphs">11.2.4. Distributional Graphs</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#histograms">11.2.4.1. Histograms</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#density-plots">11.2.4.2. Density Plots</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#violin-plots">11.2.4.3. Violin Plots</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#boxplots">11.2.4.4. Boxplots</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#heatmaps">11.2.5. Heatmaps</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="static-data-visualizations">
<h1><a class="toc-backref" href="#id1" role="doc-backlink"><span class="section-number">11. </span>Static Data Visualizations</a><a class="headerlink" href="#static-data-visualizations" title="Link to this heading">#</a></h1>
<nav class="contents" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#static-data-visualizations" id="id1">Static Data Visualizations</a></p>
<ul>
<li><p><a class="reference internal" href="#introduction-what-makes-for-a-good-data-visualization" id="id2">Introduction: What Makes For a Good Data Visualization?</a></p>
<ul>
<li><p><a class="reference internal" href="#aesthetics-data-and-scales" id="id3">Aesthetics, Data, and Scales</a></p></li>
<li><p><a class="reference internal" href="#edward-tufte-s-fundamental-principles-of-analytical-design" id="id4">Edward Tufte’s “Fundamental Principles of Analytical Design”</a></p></li>
<li><p><a class="reference internal" href="#claus-o-wilke-s-guide-to-telling-a-story-and-making-a-point" id="id5">Claus O. Wilke’s Guide to Telling a Story and Making a Point</a></p></li>
<li><p><a class="reference internal" href="#how-not-to-lie-with-statistics" id="id6">How (not) to Lie with Statistics</a></p></li>
<li><p><a class="reference internal" href="#why-not-pie-charts" id="id7">Why Not Pie Charts?</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#creating-data-visualizations-in-python" id="id8">Creating Data Visualizations in Python</a></p>
<ul>
<li><p><a class="reference internal" href="#barplots-and-how-to-use-matplotlib-seaborn-and-the-dataframe-plot-method" id="id9">Barplots and How to Use <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>, and the Dataframe <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> Method</a></p>
<ul>
<li><p><a class="reference internal" href="#vertical-and-horizontal-barplots-figure-size-labels-titles-and-colors" id="id10">Vertical and Horizontal Barplots, Figure Size, Labels, Titles, and Colors</a></p></li>
<li><p><a class="reference internal" href="#barplots-for-statistics-other-than-frequencies" id="id11">Barplots for Statistics Other Than Frequencies</a></p></li>
<li><p><a class="reference internal" href="#annotating-bars-with-values" id="id12">Annotating Bars with Values</a></p></li>
<li><p><a class="reference internal" href="#grouped-and-stacked-bars" id="id13">Grouped and Stacked Bars</a></p></li>
<li><p><a class="reference internal" href="#placing-graphs-within-grids" id="id14">Placing Graphs Within Grids</a></p></li>
<li><p><a class="reference internal" href="#saving-a-figure-as-a-local-file" id="id15">Saving a Figure as a Local File</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#scatterplots" id="id16">Scatterplots</a></p>
<ul>
<li><p><a class="reference internal" href="#using-colors-shapes-and-transparency-to-annotate-scatterplots" id="id17">Using Colors, Shapes, and Transparency to Annotate Scatterplots</a></p></li>
<li><p><a class="reference internal" href="#including-lines-of-best-fit" id="id18">Including Lines of Best Fit</a></p></li>
<li><p><a class="reference internal" href="#scatterplot-grids-and-matrices" id="id19">Scatterplot Grids and Matrices</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#line-plots" id="id20">Line Plots</a></p></li>
<li><p><a class="reference internal" href="#distributional-graphs" id="id21">Distributional Graphs</a></p>
<ul>
<li><p><a class="reference internal" href="#histograms" id="id22">Histograms</a></p></li>
<li><p><a class="reference internal" href="#density-plots" id="id23">Density Plots</a></p></li>
<li><p><a class="reference internal" href="#violin-plots" id="id24">Violin Plots</a></p></li>
<li><p><a class="reference internal" href="#boxplots" id="id25">Boxplots</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#heatmaps" id="id26">Heatmaps</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<section id="introduction-what-makes-for-a-good-data-visualization">
<h2><a class="toc-backref" href="#id2" role="doc-backlink"><span class="section-number">11.1. </span>Introduction: What Makes For a Good Data Visualization?</a><a class="headerlink" href="#introduction-what-makes-for-a-good-data-visualization" title="Link to this heading">#</a></h2>
<p>Data visualizations are graphical representations of distributions and relationships in the data. They are essential tools for exploratory data analysis (EDA), and they are important ways to communicate the results of statistical and machine learning models. In <a class="reference external" href="https://www.google.com/books/edition/_/TpYOvgEACAAJ?hl=en&amp;amp;sa=X&amp;amp;ved=2ahUKEwjFz6afxbbqAhVdoHIEHdCjDXgQ7_IDMBB6BAgNEAI">Exploratory Data Analysis</a>, John W. Tukey argues that visualizations help us to see not only problems in the data, but also can reveal patterns that theory alone never would have led us to examine.</p>
<p>Visualizations are among the best tools we have for communication. Data and statistics can be technical and dependent on terminology and jargon that are inaccessable without a great deal of training. If we need to show our data and our results to a manager, to a client, to the public, or to another audience, we can use visualizations to quickly and clearly tell the stories that the evidence in our data supports. Pictures are also efficient: even if someone can understand a technical discussion, a good picture can convey the information more quickly than a table, and more accurately as well because we can better express the context surrounding a result with a visualization.</p>
<p>But like any mode of communication, there are more effective and less effective ways to visualize data. Some visualizations are confusing. Other visualizations are misleading. Our goal is to create  graphics that tell a clear story that a general audience can quickly understand while taking steps to ensure that the data are presented accurately and in a way that does not mislead.</p>
<p>There are degrees of completion when designing a visualization. For the purposes of EDA, we ourselves might be the audience, so we can spend less time on writing descriptive labels and choosing the most aesthetically pleasing colors, shapes, and sizes for graphical elements. We can stick to defaults more often even if the defaults are ugly, or when they might be misunderstood by someone else. These exploratory graphics can accomplish Tukey’s goals for EDA: finding anomolies and problems in the data and revealing unexpected patterns. If our purpose is to use the graphic to communicate with an audience, however, then we will take steps to improve the labels and aesthetic elements of the visualization.</p>
<p>There are many words for a data visualization. In the following discussion, we will use the words visualization, graphic, graph, plot, and figure interchangably.</p>
<section id="aesthetics-data-and-scales">
<h3><a class="toc-backref" href="#id3" role="doc-backlink"><span class="section-number">11.1.1. </span>Aesthetics, Data, and Scales</a><a class="headerlink" href="#aesthetics-data-and-scales" title="Link to this heading">#</a></h3>
<p>In chapter 2 of <a class="reference external" href="https://serialmentor.com/dataviz/">Fundamentals of Data Visualization</a>, Claus O. Wilke explains that a data visualization has three parts: aesthetics, data, and scales. Aesthetics are the visual elements of graphic: the axes, the plot area, the shapes and colors of different sizes that appear in the plot area, and the labels. Scales are functions that map the data we are trying to describe to aesthetics. For example, in a <strong>scatterplot</strong>, we illustrate the relationship between two continuous-valued features by setting the values of each feature to be the x and y coordinates of a point to be plotted on a Cartesian plane.</p>
<figure class="image">
<center>
<img src="https://www.smbc-comics.com/comics/1476110366-20161010.png" width='400'>
<img src="https://imgs.xkcd.com/comics/fuck_grapefruit.png" width='500'>
<figcaption> Two examples of scatterplots: alcohols by hatred for self and for others, according to Zach Weinersmith (source: <a href="https://www.smbc-comics.com/comic/self-destructive-beverages">https://www.smbc-comics.com/comic/self-destructive-beverages</a>), and the tastiness and difficulty of eating various fruits according to Randall Munroe (Source: <a href="https://xkcd.com/388/">https://xkcd.com/388/</a>)</figcaption>
</center>
</figure>
<p>The coordinates of the points are the data, and the rule that sets the data as the x and y coordinates is the scale. In Randall Munroe’s scatterplot, he plots the fruit by scores he gives each fruit for tastiness and for difficulty. In Zach Weinersmith’s scatterplot, he determines the amount of hatred someone must have for themselves and for others in order to drink each of the alcohols. Although both are subjective and funny, there is underlying data represented in each graph, and the scale sets the points at the coordinates defined by the data. Aesthetics include the choice of shape for each point - a small hollow circle, a solid circle, squares, triangles, or another shape such as pictures of fruits - as well as the size, color, and transparency of the points. The aesthetics also include elements beyond the points: the color of the plot area, whether to include vertical and horizontal guiding lines in the background, the range of the axes, how to label the axis values (if at all), the axis labels, whether to include a legend, and the title of the graph.</p>
<p>When constructing a visualization, the part of the graph we select first is the data. We have to acquire the data we need and manipulate the data so that we can perform EDA. Second, we choose the scale. The scales are generally set by the type of graph we choose. Every scatterplot, for example, sets the two features as the coordinates of each point, and every barplot sets the height of the bars equal to the calculated frequency (or a different descriptive statistic) for each category. Once we choose a graph, we won’t be able to change the way data is mapped to aesthetics. Finally, once we’ve set the data and the scales of the graph, we can choose the aesthetics. Most of the guidance that exists regarding how to create an effective visualization focuses on the choice of graph type, which implies the scales, and on the aesthetics.</p>
</section>
<section id="edward-tufte-s-fundamental-principles-of-analytical-design">
<h3><a class="toc-backref" href="#id4" role="doc-backlink"><span class="section-number">11.1.2. </span>Edward Tufte’s “Fundamental Principles of Analytical Design”</a><a class="headerlink" href="#edward-tufte-s-fundamental-principles-of-analytical-design" title="Link to this heading">#</a></h3>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Edward_Tufte">Edward Tufte</a> is a statistician, computer scientist, and political scientist who became well known for writing guiding principles for data visualization, beginning with his book <a class="reference external" href="https://www.edwardtufte.com/tufte/books_vdqi">The Visual Display of Quantitative Information</a>. Today he travels the country, teaching one-day (expensive) <a class="reference external" href="https://www.edwardtufte.com/tufte/courses">short courses</a> on the topic of data visualization. He is a notorious <a class="reference external" href="https://www.edwardtufte.com/bboard/q-and-a-fetch-msg?msg_id=0001yB&amp;amp;topic_id=1">critic of Microsoft Powerpoint</a>, and he coined the term <a class="reference external" href="https://en.wikipedia.org/wiki/Chartjunk">chartjunk</a> to refer to “all visual elements in charts and graphs that are not necessary to comprehend the information represented on the graph, or that distract the viewer from this information.”</p>
<p>In <a class="reference external" href="https://www.edwardtufte.com/tufte/books_be">Beautiful Evidence</a>, Tufte presents six “Fundamental Principles of Analytical Design” (p. 122) which guide the choices visualization designers should make when choosing graph types and aesthetics. First, graphics must show “comparisons, contrasts, [or] differences” in the data (p. 127). A scatterplot shows differences between each of the rows in the data on the features that comprise the coordinates. A barplot compares one category of a feature to another on some dimension.</p>
<p>Second, graphs must show “causality, mechanism, explanation, [or] systemic structure” (p. 128). If the goal is to describe the relationship between two features, then an accurate portrayal of that relationship might be considered causal or an explanation if we take additional steps to account for confounding factors and if we are careful to correctly state which feature is the cause and which is the effect. If we cannot rise to the level of making a causal statement, then showing a relationship is still an illustration of the mechanism or systemic structure in the covariance of the features. Regardless of the reason for a correlation, a correlation exists and can be visualized.</p>
<p>Third, figures can and should “show multivariate data; that is, show more than 1 or 2 [features]” (p. 130). Different aesthetics make it possible for us to include more than two variables in one visualization. For example we can create a scatterplot in which the x-values represent people’s ages and the y-axis represents people’s personal incomes. We can change the colors of each point to represent each person’s gender, and we can use the shape of each point to represent the person’s political party affiliation. Other writers, including Wilke, caution against including too many features in one graphic as each additional feature makes the figure more confusing. Our goal should be to show as much of the data as possible without increasing the complexity of the figure too much.</p>
<p>Fourth, visualizations should “integrate words, numbers, [and] images” (p. 131). We can annotate graphs with words or numbers: for example, by labeling points in a scatterplot, as in both the fruit and alcohol scatterplots shown above, or by labeling bars in a barplot with the height of each bar. We can use images as well, for example by placing images of flags onto bars in a barplot that shows cross-national differences.</p>
<p>Fifth, graphics should be presented along with documentation to help the audience understand the meaning of various aesthetic elements. If we use colors to mark points in a scatterplot as representing a woman or a man, then there should be an accompanying legend that makes the colors’ meanings clear. We can also use captions underneath a figure and explanatory text to make sure that all the distinct mappings from data to aesthetics are understandable.</p>
<p>Finally, Tufte holds the following principle above all of the others:</p>
<blockquote>
<div><p>Analytical presentations ultimately stand or fall depending on the quality, relevance, and integrity of their content.</p>
</div></blockquote>
<p>(p. 136). In other words, all of the work we’ve done to acquire and manipulate data is necessary for effective visualizations to be possible. If we have not collected high quality data, or if we have not properly cleaned the data, then no amount of attention paid to a figure’s aesthetics will make the figure into a worthwhile tool for communicating distributions and relationships in the data.</p>
</section>
<section id="claus-o-wilke-s-guide-to-telling-a-story-and-making-a-point">
<h3><a class="toc-backref" href="#id5" role="doc-backlink"><span class="section-number">11.1.3. </span>Claus O. Wilke’s Guide to Telling a Story and Making a Point</a><a class="headerlink" href="#claus-o-wilke-s-guide-to-telling-a-story-and-making-a-point" title="Link to this heading">#</a></h3>
<p>We can use data visualizations to communicate findings within a dataframe to an outside audience. But we want the information contained within a visualization to be understood and remembered, and people in general do not process highly abstract information quickly, and they do not tend to remember it.</p>
<p>In chapter 29 of <a class="reference external" href="https://serialmentor.com/dataviz/">Fundamentals of Data Visualization</a>, Claus O. Wilke recommends thinking about a crafting a narrative when constructing a data visualization.
People understand and remember stories. Using a story to motivate and explain a visualization does not mean that we misrepresent the findings, but rather that we use the frame of a story to describe the findings, why they are important, and what the larger take-away points should be.</p>
<p>A <a class="reference external" href="https://blog.reedsy.com/narrative-arc/">narrative arc</a> describes the organization and sequence of a story. The most well-known model of a narrative arc is Gustav Freytag’s pyramid: Exposition, Rising Action, Climax, Falling Action, and Denouement. An academic paper or a data analysis report can follow this model as well. The artcle begins with a statement of the topic and the research question (the exposition). The literature review reveals the unaddressed areas in which a novel contribution can be made (the rising action). The results provide an answer to the research question (the climax), and a subsequent discussion places the results in the larger context of the literature and describes further implications (falling action). The conclusion summarizes the most important points of the article (the denouement).</p>
<p>There are other models for narrative arcs other than Gustav Freytag’s. Kurt Vonnegut states:</p>
<blockquote>
<div><p>There’s no reason why the simple shapes of stories can’t be fed into computers. They are beautiful shapes.</p>
</div></blockquote>
<p>In the following talk, Vonnegut maps out the narrative arc of many different stories:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">IFrame</span>
<span class="n">IFrame</span><span class="p">(</span><span class="n">src</span><span class="o">=</span><span class="s2">&quot;https://www.youtube.com/embed/oP3c1h8v2ZQ&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s2">&quot;560&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s2">&quot;315&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
        <iframe
            width="560"
            height="315"
            src="https://www.youtube.com/embed/oP3c1h8v2ZQ"
            frameborder="0"
            allowfullscreen
            
        ></iframe>
        </div></div>
</div>
<p>Regardless of the specific model used to describe a story, stories should have a beginning, middle, and an end, and should set up a conflict (a research question) and resolve that conflict (with our findings). If we keep this structure in mind, we can prepare an audience to see our findings with other visualizations that help people understand the problem, and we can use visualizations to convey both our findings and their elaborations and implications.</p>
<p>If we think about visualizations as a means to tell a story, Wilke recommends that that we take steps to make the visualizations understandable and memorable. Although Tufte encourages us to include more than one or two features in a single figure, each additional feature makes it harder to understand the stories that other features describe. Wilke suggests that we think about the main take-home points we want our audience to understand, and to reduce the features in a single visualization to only those that speak directly to this story. He writes: “Never assume your audience can rapidly process complex visual displays.” That’s true both of general audiences and of audiences of people with specific technical training: complicated figures cause everyone to tune out.</p>
<p>Suppose that we create ten barplots with exactly the same formatting. Even if each of the ten plots are perfectly understandable and clear the points that each one makes may be lost in the noise of repeated, similar images. Wilke notes that it is important to make the figures more memorable by making them more distinct. First we can use color to highlight specific elements of a figure to emphasize points that are more important to the story. If one category among the bars is of special interest to us, we can use one color for that bar and a different color for all the others. If elements of the plot represent units with well-known images, we can use these images on the graph the way Randall Munroe uses pictures of fruits instead of points. These extra visual elements will make each figure stand out and be more memorable.</p>
</section>
<section id="how-not-to-lie-with-statistics">
<h3><a class="toc-backref" href="#id6" role="doc-backlink"><span class="section-number">11.1.4. </span>How (not) to Lie with Statistics</a><a class="headerlink" href="#how-not-to-lie-with-statistics" title="Link to this heading">#</a></h3>
<p><a class="reference external" href="https://books.google.com/books/about/How_to_Lie_with_Statistics.html?id=5oSU5PepogEC">How to Lie with Statistics</a> by Darrell Huff is a short, funny, and classic book that describes many ways that statistics can be used to mislead an audience. The book was written in 1954, and has been reprinted many times since then.</p>
<figure class="image">
<center>
<img src="https://upload.wikimedia.org/wikipedia/en/2/2a/How_to_Lie_with_Statistics.jpg" width='250'>
<figcaption> Two examples of scatterplots. The tastiness and difficulty of eating various fruits according to Randall Munroe (Source: <a href="https://en.wikipedia.org/wiki/How_to_Lie_with_Statistics">https://en.wikipedia.org/wiki/How_to_Lie_with_Statistics</a>). </figcaption>
</center>
</figure>
<p>Darrell Huff discusses the dangers of drawing conclusions from biased and undersized samples, using poorly-worded survey questions, confusing the mean, median, and mode, emphasizing the mean while ignoring the distribution, and making statements about correlation from evidence that only shows a correlation. He also discusses two ways that visualizations specifically can mislead, which he calls:</p>
<ul class="simple">
<li><p>The Gee-Whiz Graph: a figure that manipulates the range of the y-axis to make it seem like a feature changes more or less than it actually does.</p></li>
<li><p>The One-Dimensional Picture: a graph that maps data to the height of images, but uses non-rectangular shapes to increase the area by a greater proportion than the difference in heights.</p></li>
</ul>
<p>The idea of a one-dimensional picture is related to Wilke’s discussion of the principle of proportional ink in chapter 17 of <a class="reference external" href="https://serialmentor.com/dataviz/">Fundamentals of Data Visualization</a>. The principle of proportional ink is</p>
<blockquote>
<div><p>The sizes of shaded areas in a visualization need to be proportional to the data values they represent.</p>
</div></blockquote>
<p>With a barplot, the images we use to represent the data are rectangles. If we double the height of a rectangle, we also double the area of a rectangle:</p>
<div class="math notranslate nohighlight">
\[ (2 \times \text{height})(\text{width}) = 2\times(\text{height})(\text{width}) = 2\times(\text{area})\]</div>
<p>The principle of proportional ink is violated when doubling the height causes the area to increase by a factor other than 2. The human eye recognizes area first, so if the data are represented by the height, a change in area by a different factor misrepresents the data. Barplots do not violate the principle of proportional ink because of the specific property of rectangles that the height and area change with the same proportion. The same thing is not true of other shapes. For example, Darrell Huff uses the following image to represent a one-dimensional picture:</p>
<figure class="image">
<center>
<img src="https://shrineodreams.files.wordpress.com/2013/01/huff3.jpg?w=640" width='400'>
<figcaption> An illustration of a violation of the principle of proportional ink. (Source: How to Lie with Statistics, p. 69). </figcaption>
</center>
</figure>
<p>The data that are represented in this figure are monetary amounts, represented by the height of each money bag. The money bag on the right is twice the height of the money bag on the left. But because these shapes are not rectangles, the area of the money bag on the right is more than double the size of the money bag on the right. A figure like this conveys the incorrect notion that the money bag on the right is larger than it is.</p>
<p>When creating data visualizations, it is important to represent the data accurately by using a reasonable scale for the y-axis (generally by including 0 in this scale), and by using rectangular area to ensure that the principle of proportional ink is not violated.</p>
</section>
<section id="why-not-pie-charts">
<h3><a class="toc-backref" href="#id7" role="doc-backlink"><span class="section-number">11.1.5. </span>Why Not Pie Charts?</a><a class="headerlink" href="#why-not-pie-charts" title="Link to this heading">#</a></h3>
<p>We will not be discussing the methodology to create pie charts. In general pie charts are considered poor ways to represent data, and many statisticians and data scientists bemoan the prevalence of pie charts in government and business. Walt Hickey, writing for <a class="reference external" href="https://www.businessinsider.com/pie-charts-are-the-worst-2013-6?op=1">Business Insider in 2013</a>, phrases his opinion of pie charts in no uncertain terms:</p>
<blockquote>
<div><p>The pie chart is easily the worst way to convey information ever developed in the history of data visualization.</p>
</div></blockquote>
<p>Hickey’s argument reflects the argument of many statisticians and data scientists. First, if the goal of a data visualization is to present data in a clear way, pie charts can obscure the data because the human eye can measure distance better than angles. The following data can be represented in pie charts or barplots:</p>
<figure class="image">
<center>
<img src="https://i.insider.com/51bf1e9becad048c0a000002?width=1300&format=jpeg&auto=webp" width='500'>
<img src="https://i.insider.com/51bf0aa8ecad04a05d00004a?width=1300&format=jpeg&auto=webp" width='500'>
<figcaption> The same data represented in pie charts then in barplots. (Source: Walt Hickey, "The Worst Chart in the World", <a href="https://www.businessinsider.com/pie-charts-are-the-worst-2013-6?op=1">https://www.businessinsider.com/pie-charts-are-the-worst-2013-6?op=1</a>).</figcaption>
</center>
</figure>
<p>In the pie charts, the five quantities are represented by the angles in the slices of the circle. But it is hard to determine how much larger or smaller each slice is relative to the others, and sometimes it is hard to determine which of the slices is largest and smallest. In contrast, this information is clear in the barplots. Pie charts are often annotated by the numbers that each slice represents, but if the labels are necessary to read a pie chart then the chart itself is not needed as a reader can look at the labels alone.</p>
<p>Pie charts do uphold the principle of proportional ink because the area of a slice of a circle is given by the formula
$<span class="math notranslate nohighlight">\( \text{area} = \frac{\theta}{360}(\pi r^2) \)</span><span class="math notranslate nohighlight">\(
where \)</span>\theta<span class="math notranslate nohighlight">\( is the angle of the slice and \)</span>r<span class="math notranslate nohighlight">\( is the radius of the circle, which is constant for all slices. If we double the angle \)</span>\theta<span class="math notranslate nohighlight">\(, the area also doubles because:
\)</span><span class="math notranslate nohighlight">\( \frac{2 \times\theta}{360}(\pi r^2) = 2 \frac{\theta}{360}(\pi r^2) = 2(\text{area}).\)</span>$
However, a common variant is a 3D piechart, as in the following example:</p>
<figure class="image">
<center>
<img src="https://i.insider.com/51bf15f869bedd9d5c000039?width=1300&format=jpeg&auto=webp" width='500'>
<figcaption> A 3D pie chart (Source: Walt Hickey, "The Worst Chart in the World", <a href="https://www.businessinsider.com/pie-charts-are-the-worst-2013-6?op=1">https://www.businessinsider.com/pie-charts-are-the-worst-2013-6?op=1</a>).</figcaption>
</center>
</figure>
<p>Because of the added base, 3D pie charts violate the principle of proportional ink. Notice that the light-blue slice on top of the circle has a larger angle than the red slice on the bottom, but more ink is devoted to the red slice than the light-blue one because of the perspective in the drawing. In addition, the tilted perspective turns the circle into an oval, which expands the angles on the top and bottom and compresses the angles on the sides. A 3D pie chart is misleading and confusing and should never be used.</p>
<p>There is one advantage of a pie chart. Pie charts show the proportion of each category to the total across categories, which barplots do not. That’s useful when the story we are trying to tell is that one category is much larger than all of the others and dominates the total when adding up all the slices. The following figure is one of the best examples of a pie chart:</p>
<figure class="image">
<center>
<img src="https://upload.wikimedia.org/wikipedia/commons/9/9e/Military_Expenditures_2018_SIPRI.png" width='500'>
<figcaption> Military spending by country (Source: Wikipedia <a href="https://en.wikipedia.org/wiki/List_of_countries_by_military_expenditures">https://en.wikipedia.org/wiki/List_of_countries_by_military_expenditures</a>).</figcaption>
</center>
</figure>
<p>In this figure, the story is that the United States spends much more on defense than any other country, and that China also spends more than any other country with the exception of the United States. Together the United States and China account for nearly half of the world’s defense spending. This pie chart is effective at making these points, but it is not effective at illustrating specific country-to-country comparisons without the numeric annotations.</p>
</section>
</section>
<section id="creating-data-visualizations-in-python">
<h2><a class="toc-backref" href="#id8" role="doc-backlink"><span class="section-number">11.2. </span>Creating Data Visualizations in Python</a><a class="headerlink" href="#creating-data-visualizations-in-python" title="Link to this heading">#</a></h2>
<p>There are many distinct styles of data visualization that are well-suited for different kinds of data. Within these styles, there are many adaptions with different aesthetics. Each style involves fixing the scale - the function that maps data to aesthetics - of the visualization, so if we choose a barplot, for example, the height of the bars (or the length of the bars if the bars are oriented horizontally) are determined by the data we are trying to plot.</p>
<p>The five most important types of data visualization are <strong>barplots, scatterplots, line plots, distributional plots, and heatmaps</strong>. There are many examples of each type later in this chapter.</p>
<p>These visualizations can also be combined. For example, a scatterplot might attach histograms to the edges of the plot area that are opposite the x and y-axes to show the histograms for each of the two features in the scatterplot. There are other kinds of data visualizations as well, such as network plots to show the connections between nodes in a network. However, in this chapter we will only focus on the visualizations described above.</p>
<p>The following discussion illustrates the code to generate barplots, scatterplots, line plots, distributional plots, and heat maps using the <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> and <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> packages in Python, as well as using the <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> method from <code class="docutils literal notranslate"><span class="pre">pandas</span></code>. For each of these plots, we can change the aesthetics to change the appearance of the plot and include additional features in the plot. We will alter the aesthetics as needed to produce good-looking, accurate, and understandable visualizations. This discussion is not meant to be a comprehensive list of visualizations, but an introduction to the major coding systems available for plotting in Python. For more examples, see the <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> <a class="reference external" href="https://matplotlib.org/gallery.html">image gallery</a> or the <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> <a class="reference external" href="https://seaborn.pydata.org/examples/index.html">example gallery</a>.</p>
<p>We can generate visualizations using <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> or <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>, so how do we know which one to use? In what situations is one package better than the other?</p>
<p>Most researchers use both. <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> is <a class="reference external" href="https://seaborn.pydata.org/">built on top of</a> <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, and it tends to produce prettier graphics with fewer lines of code than <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, but it can be limited in terms of how much an individual visualization can be customized. <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> is very flexible, but the default aesthetics do not always look very elegant. In addition, <code class="docutils literal notranslate"><span class="pre">pandas</span></code> has a <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> method that can be applied to a dataframe that uses shortcuts to generate figures from that dataframe. <code class="docutils literal notranslate"><span class="pre">pandas</span></code> does not have its own graphics engine: instead it directly connects to either <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> or to <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>, although it uses a different syntax to do so.</p>
<p>The trickiest thing about visualization in Python is that <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>, and the <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> method in <code class="docutils literal notranslate"><span class="pre">pandas</span></code> are used <strong>interchangably</strong> because some graphs and aesthetics are only possible or are much easier to generate in one package. None of these packages is currently better across the board than the other two, and different packages are better for specific tasks. It can be hard to remember what works best from situation to situation. It is even more confusing because <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>, and <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> overlap in their syntax in some ways, and are different in other ways. The best way forward is to practice many data visualizations. The more we generate data visualizations, the better our instincts will get about which package to use when.</p>
<p>Traditionally, we use the <code class="docutils literal notranslate"><span class="pre">pyplot</span></code> module from <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> with the alias <code class="docutils literal notranslate"><span class="pre">plt</span></code>, and we use <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> with the alias <code class="docutils literal notranslate"><span class="pre">sns</span></code>. We begin by loading the following packages:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
</pre></div>
</div>
</div>
</div>
<p>As with chapters 8 and 10, we will be working with the 2019 pilot study from the American National Election Study (ANES). To see how we prepared the data for analysis, or to see the tabular methods of EDA we employed on this dataset, see chapters 8 and 10 respectively. We load the cleaned data:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://github.com/jkropko/DS-6001/raw/master/localdata/anes_pilot2019_clean.csv&quot;</span><span class="p">)</span>
<span class="n">anes</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;caseid&#39;, &#39;liveurban&#39;, &#39;vote16&#39;, &#39;protest&#39;, &#39;vote&#39;,
       &#39;most_important_issue&#39;, &#39;confecon&#39;, &#39;ideology&#39;, &#39;partyID&#39;,
       &#39;universal_income&#39;, &#39;family_separation&#39;, &#39;free_college&#39;,
       &#39;forgive_loans&#39;, &#39;race&#39;, &#39;birthyr&#39;, &#39;sex&#39;, &#39;education&#39;, &#39;weight&#39;,
       &#39;fttrump&#39;, &#39;ftobama&#39;, &#39;ftbiden&#39;, &#39;ftwarren&#39;, &#39;ftsanders&#39;, &#39;ftbuttigieg&#39;,
       &#39;ftharris&#39;, &#39;ftblack&#39;, &#39;ftwhite&#39;, &#39;fthisp&#39;, &#39;ftasian&#39;, &#39;ftmuslim&#39;,
       &#39;ftillegal&#39;, &#39;ftjournal&#39;, &#39;ftnato&#39;, &#39;ftun&#39;, &#39;ftice&#39;, &#39;ftnra&#39;, &#39;ftchina&#39;,
       &#39;ftnkorea&#39;, &#39;ftmexico&#39;, &#39;ftsaudi&#39;, &#39;ftukraine&#39;, &#39;ftiran&#39;, &#39;ftbritain&#39;,
       &#39;ftgermany&#39;, &#39;ftjapan&#39;, &#39;ftisrael&#39;, &#39;ftfrance&#39;, &#39;ftcanada&#39;, &#39;ftturkey&#39;,
       &#39;ftrussia&#39;, &#39;ftpales&#39;, &#39;ftimmig&#39;, &#39;partisanship&#39;, &#39;ftbiden_level&#39;,
       &#39;age&#39;, &#39;age2&#39;, &#39;ftbiden_float&#39;, &#39;ftbiden_cat&#39;, &#39;ftbiden_str&#39;,
       &#39;prefersbiden&#39;, &#39;worried_econ&#39;, &#39;favor_both&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<section id="barplots-and-how-to-use-matplotlib-seaborn-and-the-dataframe-plot-method">
<h3><a class="toc-backref" href="#id9" role="doc-backlink"><span class="section-number">11.2.1. </span>Barplots and How to Use <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>, and the Dataframe <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> Method</a><a class="headerlink" href="#barplots-and-how-to-use-matplotlib-seaborn-and-the-dataframe-plot-method" title="Link to this heading">#</a></h3>
<p>Barplots are appropriate for describing the frequencies of a categorical feature. Each category gets a bar. The bars can be oriented vertically or horizontally, and the height or length each bar represents the data. Most often we plot the frequencies of categories this way, but we can also plot other conditional descriptive statistics such as the within-category mean of a continuous feature. We can overlay more than one feature with the same categories by stacking the bars on top of one another or by placing them side by side.</p>
<p>We can create a barplot using <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>, or the <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> method for a <code class="docutils literal notranslate"><span class="pre">pandas</span></code> dataframe. We can use any of these options to create a visualization. The options differ in that some tasks easier or harder when using a particular package, and specific options might produce graphics that look better or worse.</p>
<section id="vertical-and-horizontal-barplots-figure-size-labels-titles-and-colors">
<h4><a class="toc-backref" href="#id10" role="doc-backlink"><span class="section-number">11.2.1.1. </span>Vertical and Horizontal Barplots, Figure Size, Labels, Titles, and Colors</a><a class="headerlink" href="#vertical-and-horizontal-barplots-figure-size-labels-titles-and-colors" title="Link to this heading">#</a></h4>
<p>To generate a barplot using <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, we start by creating a series that contains only the numbers we intend to plot. For example, we can count the values of each category of <code class="docutils literal notranslate"><span class="pre">confecon</span></code>, how worried a person is about the state of the economy, using the <code class="docutils literal notranslate"><span class="pre">.value_counts()</span></code> method. The barplot we create with <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> will order the bars in the same way they appear with <code class="docutils literal notranslate"><span class="pre">.value_counts()</span></code>, so we can first rearrange the categories in the order we want, then we can use the <code class="docutils literal notranslate"><span class="pre">.sort_index()</span></code> method to make sure that the categories appear in this order:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anes</span><span class="p">[</span><span class="s1">&#39;confecon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">anes</span><span class="p">[</span><span class="s1">&#39;confecon&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>
<span class="n">anes</span><span class="p">[</span><span class="s1">&#39;confecon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">anes</span><span class="p">[</span><span class="s1">&#39;confecon&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">reorder_categories</span><span class="p">([</span><span class="s1">&#39;Not at all worried&#39;</span><span class="p">,</span> 
                                                            <span class="s1">&#39;A little worried&#39;</span><span class="p">,</span> 
                                                            <span class="s1">&#39;Moderately worried&#39;</span><span class="p">,</span> 
                                                            <span class="s1">&#39;Very worried&#39;</span><span class="p">,</span> 
                                                            <span class="s1">&#39;Extremely worried&#39;</span><span class="p">])</span>
<span class="n">mybars</span> <span class="o">=</span> <span class="n">anes</span><span class="o">.</span><span class="n">confecon</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
<span class="n">mybars</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>confecon
Not at all worried    764
A little worried      847
Moderately worried    871
Very worried          431
Extremely worried     252
Name: count, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Now that the counts are stored in <code class="docutils literal notranslate"><span class="pre">mybars</span></code>, the simplest barplot uses the <code class="docutils literal notranslate"><span class="pre">plt.bar()</span></code> function. For this image and for all the images presented below, the image will appear automatically in a Jupyter notebook. In a Python script we would have to also type <code class="docutils literal notranslate"><span class="pre">plt.show()</span></code> in order to display the figure. <code class="docutils literal notranslate"><span class="pre">plt.bar()</span></code> takes two arguments: the categories, stored in the <code class="docutils literal notranslate"><span class="pre">.index</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">mybars</span></code>, and the values, stored in <code class="docutils literal notranslate"><span class="pre">.values</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">mybars</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">mybars</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;BarContainer object of 5 artists&gt;
</pre></div>
</div>
<img alt="_images/afe1f097f81c1130ed718560e8e1160ce35d72e36fbd4cb72d4e872163a2d18a.png" src="_images/afe1f097f81c1130ed718560e8e1160ce35d72e36fbd4cb72d4e872163a2d18a.png" />
</div>
</div>
<p>This plot leaves a lot of be desired. First, the category labels run into each other. To solve this problem, we can increase the size of the figure. We can change the size by typing</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">))</span>
</pre></div>
</div>
<p>prior to the call to <code class="docutils literal notranslate"><span class="pre">plt.bar()</span></code> or to another plotting function. Here <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> are numbers, in inches. If the window can’t contain the proportions, the figure is scaled down proportionally. The <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.figure.html">default dimensions</a> for a plot are 6.4 inches wide and 4.8 inches high. To create a figure 15 inches wide and 6 inches high, for example, we can type:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">mybars</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">mybars</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;BarContainer object of 5 artists&gt;
</pre></div>
</div>
<img alt="_images/2c8d361275866f682f2ab0c402ece49395b55dfce7d0961347774a64e8553b81.png" src="_images/2c8d361275866f682f2ab0c402ece49395b55dfce7d0961347774a64e8553b81.png" />
</div>
</div>
<p>Now we can clearly see the individual bar labels. Another way to accomodate longer bar labels is to orient the bars horizontally, leaving plenty of room for the labels on the left. To generate horizontal bars, First we use <code class="docutils literal notranslate"><span class="pre">plt.barh()</span></code> instead of <code class="docutils literal notranslate"><span class="pre">plt.bar()</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">myplot</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">mybars</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">mybars</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/4b9b832e55472893653bd11917c1c3d7a891d4be36430e03eaf17f20a9383655.png" src="_images/4b9b832e55472893653bd11917c1c3d7a891d4be36430e03eaf17f20a9383655.png" />
</div>
</div>
<p>There are many ways that we can make this figure more understandable. First, we can add axis labels. To add a label to the x and y axes, we type</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;a label&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;another label&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>after the call to <code class="docutils literal notranslate"><span class="pre">plt.bar()</span></code>, <code class="docutils literal notranslate"><span class="pre">plt.barh()</span></code>, or another plotting function. To add an overall title that will appear above the graph, we type</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;a title&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>after the plotting function. For example, we can add axis labels and a title to our horizontal barplot:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">mybars</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">mybars</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Amount of Worry About the Current State of the Economy&#39;)
</pre></div>
</div>
<img alt="_images/43c24c534bd42a6e28d6868931658ee6a7634ca13144dee5bac133eb6dd30c66.png" src="_images/43c24c534bd42a6e28d6868931658ee6a7634ca13144dee5bac133eb6dd30c66.png" />
</div>
</div>
<p>To change the color of the bars, use the <code class="docutils literal notranslate"><span class="pre">color</span></code> argument inside the plotting function. We can set the color of the bars to red, or to <a class="reference external" href="https://matplotlib.org/3.1.0/gallery/color/named_colors.html">many other colors</a>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">mybars</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">mybars</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Amount of Worry About the Current State of the Economy&#39;)
</pre></div>
</div>
<img alt="_images/3a02fe5bc7ee4dbf90d8fac69dd694d165f689f60d8bc95902de23fd5277a443.png" src="_images/3a02fe5bc7ee4dbf90d8fac69dd694d165f689f60d8bc95902de23fd5277a443.png" />
</div>
</div>
<p>To set different colors for every bar, we can pass a list of colors. That’s useful if we want to emphasize particular bars, such as the ones for “very worried” and “extremely worried”:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">mybars</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">mybars</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> 
         <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Amount of Worry About the Current State of the Economy&#39;)
</pre></div>
</div>
<img alt="_images/4328c5662b8d32e7ab3f5d66a6e621a42ada3424fd13fe96aa7c885109b59c2a.png" src="_images/4328c5662b8d32e7ab3f5d66a6e621a42ada3424fd13fe96aa7c885109b59c2a.png" />
</div>
</div>
<p>To create a barplot with <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>, we use the <code class="docutils literal notranslate"><span class="pre">sns.barplot()</span></code> function. There are two ways to use this function. We can pass a series directly to the <code class="docutils literal notranslate"><span class="pre">x</span></code> argument to define the categories and another series to the <code class="docutils literal notranslate"><span class="pre">y</span></code> argument to define the values:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">mybars</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">mybars</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Axes: xlabel=&#39;confecon&#39;&gt;
</pre></div>
</div>
<img alt="_images/9254f538df127435fa2a847cc75dc8649a18ad4bec1035152d1d0836d3605e6e.png" src="_images/9254f538df127435fa2a847cc75dc8649a18ad4bec1035152d1d0836d3605e6e.png" />
</div>
</div>
<p>Alternatively, if the data exists in a dataframe, we can pass the x and y columns to the <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> arguments, and the dataframe to the <code class="docutils literal notranslate"><span class="pre">data</span></code> argument:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mybars_df</span> <span class="o">=</span> <span class="n">mybars</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">mybars_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>confecon</th>
      <th>count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Not at all worried</td>
      <td>764</td>
    </tr>
    <tr>
      <th>1</th>
      <td>A little worried</td>
      <td>847</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Moderately worried</td>
      <td>871</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Very worried</td>
      <td>431</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Extremely worried</td>
      <td>252</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;confecon&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">mybars_df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">13</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;confecon&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">mybars_df</span><span class="p">)</span>

<span class="nn">File ~/.pyenv/versions/3.12.5/lib/python3.12/site-packages/seaborn/categorical.py:2341,</span> in <span class="ni">barplot</span><span class="nt">(data, x, y, hue, order, hue_order, estimator, errorbar, n_boot, seed, units, weights, orient, color, palette, saturation, fill, hue_norm, width, dodge, gap, log_scale, native_scale, formatter, legend, capsize, err_kws, ci, errcolor, errwidth, ax, **kwargs)</span>
<span class="g g-Whitespace">   </span><span class="mi">2338</span> <span class="k">if</span> <span class="n">estimator</span> <span class="ow">is</span> <span class="nb">len</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">2339</span>     <span class="n">estimator</span> <span class="o">=</span> <span class="s2">&quot;size&quot;</span>
<span class="ne">-&gt; </span><span class="mi">2341</span> <span class="n">p</span> <span class="o">=</span> <span class="n">_CategoricalAggPlotter</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">2342</span>     <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">2343</span>     <span class="n">variables</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="n">hue</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="n">units</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">weights</span><span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">2344</span>     <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">2345</span>     <span class="n">orient</span><span class="o">=</span><span class="n">orient</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">2346</span>     <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">2347</span>     <span class="n">legend</span><span class="o">=</span><span class="n">legend</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">2348</span> <span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2350</span> <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">2351</span>     <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>

<span class="nn">File ~/.pyenv/versions/3.12.5/lib/python3.12/site-packages/seaborn/categorical.py:67,</span> in <span class="ni">_CategoricalPlotter.__init__</span><span class="nt">(self, data, variables, order, orient, require_numeric, color, legend)</span>
<span class="g g-Whitespace">     </span><span class="mi">56</span> <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
<span class="g g-Whitespace">     </span><span class="mi">57</span>     <span class="bp">self</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">58</span>     <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
   <span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">64</span>     <span class="n">legend</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">65</span> <span class="p">):</span>
<span class="ne">---&gt; </span><span class="mi">67</span>     <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">variables</span><span class="o">=</span><span class="n">variables</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">69</span>     <span class="c1"># This method takes care of some bookkeeping that is necessary because the</span>
<span class="g g-Whitespace">     </span><span class="mi">70</span>     <span class="c1"># original categorical plots (prior to the 2021 refactor) had some rules that</span>
<span class="g g-Whitespace">     </span><span class="mi">71</span>     <span class="c1"># don&#39;t fit exactly into VectorPlotter logic. It may be wise to have a second</span>
   <span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">76</span>     <span class="c1"># default VectorPlotter rules. If we do decide to make orient part of the</span>
<span class="g g-Whitespace">     </span><span class="mi">77</span>     <span class="c1"># _base variable assignment, we&#39;ll want to figure out how to express that.</span>
<span class="g g-Whitespace">     </span><span class="mi">78</span>     <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_format</span> <span class="o">==</span> <span class="s2">&quot;wide&quot;</span> <span class="ow">and</span> <span class="n">orient</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;h&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">]:</span>

<span class="nn">File ~/.pyenv/versions/3.12.5/lib/python3.12/site-packages/seaborn/_base.py:634,</span> in <span class="ni">VectorPlotter.__init__</span><span class="nt">(self, data, variables)</span>
<span class="g g-Whitespace">    </span><span class="mi">629</span> <span class="c1"># var_ordered is relevant only for categorical axis variables, and may</span>
<span class="g g-Whitespace">    </span><span class="mi">630</span> <span class="c1"># be better handled by an internal axis information object that tracks</span>
<span class="g g-Whitespace">    </span><span class="mi">631</span> <span class="c1"># such information and is set up by the scale_* methods. The analogous</span>
<span class="g g-Whitespace">    </span><span class="mi">632</span> <span class="c1"># information for numeric axes would be information about log scales.</span>
<span class="g g-Whitespace">    </span><span class="mi">633</span> <span class="bp">self</span><span class="o">.</span><span class="n">_var_ordered</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>  <span class="c1"># alt., used DefaultDict</span>
<span class="ne">--&gt; </span><span class="mi">634</span> <span class="bp">self</span><span class="o">.</span><span class="n">assign_variables</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">636</span> <span class="c1"># TODO Lots of tests assume that these are called to initialize the</span>
<span class="g g-Whitespace">    </span><span class="mi">637</span> <span class="c1"># mappings to default values on class initialization. I&#39;d prefer to</span>
<span class="g g-Whitespace">    </span><span class="mi">638</span> <span class="c1"># move away from that and only have a mapping when explicitly called.</span>
<span class="g g-Whitespace">    </span><span class="mi">639</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;hue&quot;</span><span class="p">,</span> <span class="s2">&quot;size&quot;</span><span class="p">,</span> <span class="s2">&quot;style&quot;</span><span class="p">]:</span>

<span class="nn">File ~/.pyenv/versions/3.12.5/lib/python3.12/site-packages/seaborn/_base.py:679,</span> in <span class="ni">VectorPlotter.assign_variables</span><span class="nt">(self, data, variables)</span>
<span class="g g-Whitespace">    </span><span class="mi">674</span> <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">675</span>     <span class="c1"># When dealing with long-form input, use the newer PlotData</span>
<span class="g g-Whitespace">    </span><span class="mi">676</span>     <span class="c1"># object (internal but introduced for the objects interface)</span>
<span class="g g-Whitespace">    </span><span class="mi">677</span>     <span class="c1"># to centralize / standardize data consumption logic.</span>
<span class="g g-Whitespace">    </span><span class="mi">678</span>     <span class="bp">self</span><span class="o">.</span><span class="n">input_format</span> <span class="o">=</span> <span class="s2">&quot;long&quot;</span>
<span class="ne">--&gt; </span><span class="mi">679</span>     <span class="n">plot_data</span> <span class="o">=</span> <span class="n">PlotData</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">680</span>     <span class="n">frame</span> <span class="o">=</span> <span class="n">plot_data</span><span class="o">.</span><span class="n">frame</span>
<span class="g g-Whitespace">    </span><span class="mi">681</span>     <span class="n">names</span> <span class="o">=</span> <span class="n">plot_data</span><span class="o">.</span><span class="n">names</span>

<span class="nn">File ~/.pyenv/versions/3.12.5/lib/python3.12/site-packages/seaborn/_core/data.py:58,</span> in <span class="ni">PlotData.__init__</span><span class="nt">(self, data, variables)</span>
<span class="g g-Whitespace">     </span><span class="mi">51</span> <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
<span class="g g-Whitespace">     </span><span class="mi">52</span>     <span class="bp">self</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">53</span>     <span class="n">data</span><span class="p">:</span> <span class="n">DataSource</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">54</span>     <span class="n">variables</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">VariableSpec</span><span class="p">],</span>
<span class="g g-Whitespace">     </span><span class="mi">55</span> <span class="p">):</span>
<span class="g g-Whitespace">     </span><span class="mi">57</span>     <span class="n">data</span> <span class="o">=</span> <span class="n">handle_data_source</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">58</span>     <span class="n">frame</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assign_variables</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">60</span>     <span class="bp">self</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span>
<span class="g g-Whitespace">     </span><span class="mi">61</span>     <span class="bp">self</span><span class="o">.</span><span class="n">names</span> <span class="o">=</span> <span class="n">names</span>

<span class="nn">File ~/.pyenv/versions/3.12.5/lib/python3.12/site-packages/seaborn/_core/data.py:232,</span> in <span class="ni">PlotData._assign_variables</span><span class="nt">(self, data, variables)</span>
<span class="g g-Whitespace">    </span><span class="mi">230</span>     <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">231</span>         <span class="n">err</span> <span class="o">+=</span> <span class="s2">&quot;An entry with this name does not appear in `data`.&quot;</span>
<span class="ne">--&gt; </span><span class="mi">232</span>     <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">234</span> <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">235</span> 
<span class="g g-Whitespace">    </span><span class="mi">236</span>     <span class="c1"># Otherwise, assume the value somehow represents data</span>
<span class="g g-Whitespace">    </span><span class="mi">237</span> 
<span class="g g-Whitespace">    </span><span class="mi">238</span>     <span class="c1"># Ignore empty data structures</span>
<span class="g g-Whitespace">    </span><span class="mi">239</span>     <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">Sized</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>

<span class="ne">ValueError</span>: Could not interpret value `index` for `x`. An entry with this name does not appear in `data`.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 1000x600 with 0 Axes&gt;
</pre></div>
</div>
</div>
</div>
<p>To orient a <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> barplot horizontally, simply interchange the <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> features:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;confecon&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">mybars_df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1a23d39d10&gt;
</pre></div>
</div>
<img alt="_images/0e24c3038e100765fe70892c0ed58af21328ade5961a1e26623d5eedb57e905d.png" src="_images/0e24c3038e100765fe70892c0ed58af21328ade5961a1e26623d5eedb57e905d.png" />
</div>
</div>
<p>Notice that in the barplots above the axes are mislabeled. <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> graphics use the same functions as <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> to change the title and axes:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;confecon&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">mybars_df</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Amount of Worry About the Current State of the Economy&#39;)
</pre></div>
</div>
<img alt="_images/0d4a9892d1a58ca4cef394e1ddf0948e2a7142ce25803822d0370974092dd6ac.png" src="_images/0d4a9892d1a58ca4cef394e1ddf0948e2a7142ce25803822d0370974092dd6ac.png" />
</div>
</div>
<p>Unlike <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> uses different colors for each bar as a default simply because it is prettier. Edward Tufte would call this aesthetic choice “chartjunk”, however, because the colors do not map to any additional feature or have any meaning other than being nicer to look at. Different colors are fine, but to change them, use the <code class="docutils literal notranslate"><span class="pre">palette</span></code> argument as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;confecon&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">mybars_df</span><span class="p">,</span>
           <span class="n">palette</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Amount of Worry About the Current State of the Economy&#39;)
</pre></div>
</div>
<img alt="_images/a69668671e30c482ca4e68193e1c6a55917924d9b3b49c1c888c302e98a2e348.png" src="_images/a69668671e30c482ca4e68193e1c6a55917924d9b3b49c1c888c302e98a2e348.png" />
</div>
</div>
<p>To create a barplot using the <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> method in <code class="docutils literal notranslate"><span class="pre">pandas</span></code>, first save the values as a dataframe as we do with <code class="docutils literal notranslate"><span class="pre">mybars_df</span></code> above, then apply <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> to this dataframe. <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> has an argument <code class="docutils literal notranslate"><span class="pre">kind</span></code> that let’s us specify the graph type. For a barplot, we write <code class="docutils literal notranslate"><span class="pre">kind='bar'</span></code> and we specify the x and y features the same way we did with <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mybars_df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;confecon&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1a24398910&gt;
</pre></div>
</div>
<img alt="_images/ad815ed975a08ab9819e0279ab6b9569da91f311241c4d25b942ff58f044fff2.png" src="_images/ad815ed975a08ab9819e0279ab6b9569da91f311241c4d25b942ff58f044fff2.png" />
</div>
</div>
<p>Although <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> uses <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> to generate its visualizations, it uses some different defaults. Note, for example, that the category labels are oriented vertically instead of horizontally to avoid overlapping labels.</p>
<p><code class="docutils literal notranslate"><span class="pre">plt.figure(figsize=(10,</span> <span class="pre">6))</span></code> does not work with the <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> method, but this method includes a <code class="docutils literal notranslate"><span class="pre">figsize</span></code> argument:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mybars_df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;confecon&#39;</span><span class="p">,</span>
              <span class="n">figsize</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1a24571a90&gt;
</pre></div>
</div>
<img alt="_images/45fd654fe2cd61a3e8510cdcf88493bb1e820c65729d992b00e36be5686ef1cc.png" src="_images/45fd654fe2cd61a3e8510cdcf88493bb1e820c65729d992b00e36be5686ef1cc.png" />
</div>
</div>
<p>To create a horizontal bar plot, use <code class="docutils literal notranslate"><span class="pre">kind='barh'</span></code> instead of <code class="docutils literal notranslate"><span class="pre">kind='bar'</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mybars_df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;barh&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;confecon&#39;</span><span class="p">,</span>
              <span class="n">figsize</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1a24675850&gt;
</pre></div>
</div>
<img alt="_images/c9e627d130d65cd948d3004153c2755a00679a3a63704c41edacec4ebbe25ac7.png" src="_images/c9e627d130d65cd948d3004153c2755a00679a3a63704c41edacec4ebbe25ac7.png" />
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> method also uses the same <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> functions for setting the axis labels and title:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mybars_df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;barh&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;confecon&#39;</span><span class="p">,</span>
              <span class="n">figsize</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Amount of Worry About the Current State of the Economy&#39;)
</pre></div>
</div>
<img alt="_images/2162fa31e534aafbd107a6679469eeb08308de8f93a7e97ceefb066ddc92c68d.png" src="_images/2162fa31e534aafbd107a6679469eeb08308de8f93a7e97ceefb066ddc92c68d.png" />
</div>
</div>
<p>To change the colors of the bars, use the <code class="docutils literal notranslate"><span class="pre">color</span></code> argument:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mybars_df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;barh&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;confecon&#39;</span><span class="p">,</span>
              <span class="n">figsize</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span>
              <span class="n">color</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Amount of Worry About the Current State of the Economy&#39;)
</pre></div>
</div>
<img alt="_images/432c393526192318bcb115cbf921f2edf64406fbe6c843207b6f0f077ff84508.png" src="_images/432c393526192318bcb115cbf921f2edf64406fbe6c843207b6f0f077ff84508.png" />
</div>
</div>
<p>Notice that there is a legend included by default. The legend will be important when we use the <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> method to handle situations in which we stack bars or align them side-by-side for different groups. But in this case the legend is unnecessary. To turn off the legend, type <code class="docutils literal notranslate"><span class="pre">legend=False</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mybars_df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;barh&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;confecon&#39;</span><span class="p">,</span>
              <span class="n">figsize</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span>
              <span class="n">color</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">],</span>
              <span class="n">legend</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Amount of Worry About the Current State of the Economy&#39;)
</pre></div>
</div>
<img alt="_images/3eee6d33adb598a3c7fc0e4c4826dc573dca41f90100228b9518e10f7c344e6d.png" src="_images/3eee6d33adb598a3c7fc0e4c4826dc573dca41f90100228b9518e10f7c344e6d.png" />
</div>
</div>
</section>
<section id="barplots-for-statistics-other-than-frequencies">
<h4><a class="toc-backref" href="#id11" role="doc-backlink"><span class="section-number">11.2.1.2. </span>Barplots for Statistics Other Than Frequencies</a><a class="headerlink" href="#barplots-for-statistics-other-than-frequencies" title="Link to this heading">#</a></h4>
<p>A barplot does not have to simply illustrate frequencies. We can show any descriptive statistic in a barplot that can be calculated within each category. For example, we can show the average age of the people who responded with each level of economic worry. First we need to create a conditional means table and convert it to a dataframe with the <code class="docutils literal notranslate"><span class="pre">.reset_index()</span></code> method:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mybars</span> <span class="o">=</span> <span class="n">anes</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;confecon&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;age&#39;</span><span class="p">:</span><span class="s1">&#39;mean&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
<span class="n">mybars_df</span> <span class="o">=</span> <span class="n">mybars</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">mybars_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>confecon</th>
      <th>age</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Not at all worried</td>
      <td>57.663613</td>
    </tr>
    <tr>
      <th>1</th>
      <td>A little worried</td>
      <td>52.792208</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Moderately worried</td>
      <td>48.409874</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Very worried</td>
      <td>50.359629</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Extremely worried</td>
      <td>47.801587</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Then we can plot these average ages using the same code we used for a barplot in <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> or with the <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> method. Here is a <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> barplot:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">mybars_df</span><span class="o">.</span><span class="n">confecon</span><span class="p">,</span> <span class="n">mybars_df</span><span class="o">.</span><span class="n">age</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Average Age&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Amount of Worry About the Current State of the Economy&#39;)
</pre></div>
</div>
<img alt="_images/2768edcd82f6b2a35c2ab7b66753efa2f2b694dda4730bc760b2a32e4a7d64c7.png" src="_images/2768edcd82f6b2a35c2ab7b66753efa2f2b694dda4730bc760b2a32e4a7d64c7.png" />
</div>
</div>
<p>Here is a <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> barplot:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;confecon&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">mybars_df</span><span class="p">,</span>
           <span class="n">palette</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;green&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Average Age&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Amount of Worry About the Current State of the Economy&#39;)
</pre></div>
</div>
<img alt="_images/35c69c3b8c243819a5e2997ccd025a0dea4161691fe899212cefd38b71c0e0b7.png" src="_images/35c69c3b8c243819a5e2997ccd025a0dea4161691fe899212cefd38b71c0e0b7.png" />
</div>
</div>
<p>And here is the barplot using <code class="docutils literal notranslate"><span class="pre">.plot()</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mybars_df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;barh&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;confecon&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;age&#39;</span><span class="p">,</span>
              <span class="n">figsize</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span>
              <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>
              <span class="n">legend</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Average Age&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Amount of Worry About the Current State of the Economy&#39;)
</pre></div>
</div>
<img alt="_images/a6b7fde444c8996f133fd74023800510b6fae855fe20f0b41b1b4c31f0790c4e.png" src="_images/a6b7fde444c8996f133fd74023800510b6fae855fe20f0b41b1b4c31f0790c4e.png" />
</div>
</div>
</section>
<section id="annotating-bars-with-values">
<h4><a class="toc-backref" href="#id12" role="doc-backlink"><span class="section-number">11.2.1.3. </span>Annotating Bars with Values</a><a class="headerlink" href="#annotating-bars-with-values" title="Link to this heading">#</a></h4>
<p>We can annotate barplots with the heights of the bars, regardless of whether those bars are frequencies, means, or another descriptive statistic. Annotating barplots with values is tricky whether we use <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>, or <code class="docutils literal notranslate"><span class="pre">.plot()</span></code>, but fortunately the same method will work for all three plotting tools.</p>
<p>First, we can use <code class="docutils literal notranslate"><span class="pre">plt.text()</span></code> to place text onto a figure. This function takes six arguments: the x and y coordinates where the text should be placed, the text, and <code class="docutils literal notranslate"><span class="pre">horizontalalignment='center'</span></code> and <code class="docutils literal notranslate"><span class="pre">verticalalignment='center'</span></code> to place the text box at the center of the specified (x,y) point (we can also specify left or right, or top or bottom), and <code class="docutils literal notranslate"><span class="pre">fontsize</span></code>. To place “Hello, world!” into the last figure, we can type:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mybars_df</span> <span class="o">=</span> <span class="n">anes</span><span class="o">.</span><span class="n">confecon</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">mybars_df</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">],</span> <span class="n">mybars_df</span><span class="p">[</span><span class="s1">&#39;confecon&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Hello, world!&#39;</span><span class="p">,</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="mi">28</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(400, 3, &#39;Hello, world!&#39;)
</pre></div>
</div>
<img alt="_images/bf630b1191625569cfa7a8582396adef7ce4f9628fac7a2cdb97efad4289bf82.png" src="_images/bf630b1191625569cfa7a8582396adef7ce4f9628fac7a2cdb97efad4289bf82.png" />
</div>
</div>
<p>We are going to use <code class="docutils literal notranslate"><span class="pre">plt.text()</span></code> to place values onto the bars, but we need to know the exact x and y-coordinates of the top or end of each bar. It is a mistake to try to find these coordinates through guessing and checking. Instead, rather than calling <code class="docutils literal notranslate"><span class="pre">plt.bar()</span></code> or another plotting function directly, we save it as a separate variable. The image will still display automatically in a Jupyter notebook, or after typing <code class="docutils literal notranslate"><span class="pre">plt.show()</span></code>. The variable has an attribute called <code class="docutils literal notranslate"><span class="pre">.patches</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">myplot</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">mybars_df</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">],</span> <span class="n">mybars_df</span><span class="p">[</span><span class="s1">&#39;confecon&#39;</span><span class="p">])</span>
<span class="n">myplot</span><span class="o">.</span><span class="n">patches</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;matplotlib.patches.Rectangle at 0x1a24021a90&gt;,
 &lt;matplotlib.patches.Rectangle at 0x1a23a3cc10&gt;,
 &lt;matplotlib.patches.Rectangle at 0x1a2452a310&gt;,
 &lt;matplotlib.patches.Rectangle at 0x1a24571ed0&gt;,
 &lt;matplotlib.patches.Rectangle at 0x1a2458cad0&gt;]
</pre></div>
</div>
<img alt="_images/e4f30e8500b5b46169853e5e8fb5fe73dd5eb3a73cf56d47b481c34c96d297d7.png" src="_images/e4f30e8500b5b46169853e5e8fb5fe73dd5eb3a73cf56d47b481c34c96d297d7.png" />
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">.patches</span></code> attribute contains a list in which each item in the list looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">Rectangle</span> <span class="n">at</span> <span class="mh">0x1a391f0c50</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>These codes are tags denoting the shapes that appear in the plot. There are five items in the list, one for each rectangle in this barplot. An individual rectangle has a method <code class="docutils literal notranslate"><span class="pre">.get_x()</span></code> that lists the x-coordinate of the left-edge of the rectangle, <code class="docutils literal notranslate"><span class="pre">.get_height()</span></code> that lists the y-coordinate of the top edge of the rectangle, and <code class="docutils literal notranslate"><span class="pre">.get_width()</span></code> that lists the width of each rectangle. These statistics for the first rectangle are:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">myplot</span><span class="o">.</span><span class="n">patches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_x</span><span class="p">(),</span>
 <span class="n">myplot</span><span class="o">.</span><span class="n">patches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_height</span><span class="p">(),</span>
 <span class="n">myplot</span><span class="o">.</span><span class="n">patches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_width</span><span class="p">()]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[-0.4, 764, 0.8]
</pre></div>
</div>
</div>
</div>
<p>We can loop across the rectangles in the <code class="docutils literal notranslate"><span class="pre">.patches</span></code> attribute, extract the x and y-coordinates for the values as well as the values themselves, and use <code class="docutils literal notranslate"><span class="pre">plt.text()</span></code> to place them onto the figure, as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">myplot</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
    <span class="n">xcoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span> <span class="o">+</span> <span class="mf">.5</span><span class="o">*</span><span class="n">rect</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span>
    <span class="n">ycoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">xcoor</span><span class="p">,</span> <span class="n">ycoor</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ycoor</span><span class="p">),</span> 
             <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> 
             <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span>
             <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
</pre></div>
</div>
<p>This is a for-loop in which <code class="docutils literal notranslate"><span class="pre">rect</span></code> is the token that represents a single rectangle. <code class="docutils literal notranslate"><span class="pre">xcoor</span></code> is the x-coordinate for the value, which adds half the rectangle’s width to be placed in the middle of the rectangle. <code class="docutils literal notranslate"><span class="pre">ycoor</span></code> is the y-coordinate and the value to be displayed, which we convert to text with <code class="docutils literal notranslate"><span class="pre">str()</span></code>. We set <code class="docutils literal notranslate"><span class="pre">horizontalalignment='center'</span></code> and <code class="docutils literal notranslate"><span class="pre">verticalalignment='bottom'</span></code> to ensure that the specified point exists on the bottom-middle of the text box: that places the numbers above the middle of each rectangle. Finally we repeat the process for every rectangle. For the barplot of economic confidence this approach yields the following output:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">myplot</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">mybars_df</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">],</span> <span class="n">mybars_df</span><span class="p">[</span><span class="s1">&#39;confecon&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">myplot</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
    <span class="n">xcoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span> <span class="o">+</span> <span class="mf">.5</span><span class="o">*</span><span class="n">rect</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span>
    <span class="n">ycoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">xcoor</span><span class="p">,</span> <span class="n">ycoor</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ycoor</span><span class="p">),</span> 
             <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> 
             <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span>
             <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/f2fc7faf3c0d98983ec0c7786d72391139ebd7e4c4e7967723783102236174bb.png" src="_images/f2fc7faf3c0d98983ec0c7786d72391139ebd7e4c4e7967723783102236174bb.png" />
</div>
</div>
<p>To add labels to horizontal barplots, we use the same method, but we switch the x and y coordinates in <code class="docutils literal notranslate"><span class="pre">plt.text()</span></code> and we switch <code class="docutils literal notranslate"><span class="pre">.get_width()</span></code> and <code class="docutils literal notranslate"><span class="pre">.get_height()</span></code> to account for the new orientation:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">myplot</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">mybars_df</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">],</span> <span class="n">mybars_df</span><span class="p">[</span><span class="s1">&#39;confecon&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">myplot</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
    <span class="n">xcoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_y</span><span class="p">()</span> <span class="o">+</span> <span class="mf">.5</span><span class="o">*</span><span class="n">rect</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
    <span class="n">ycoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">ycoor</span><span class="p">,</span> <span class="n">xcoor</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ycoor</span><span class="p">),</span> 
             <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> 
             <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
             <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/19550a419d46069390d6ebc18ae938317085a780c87453921834543bbc8c5a1d.png" src="_images/19550a419d46069390d6ebc18ae938317085a780c87453921834543bbc8c5a1d.png" />
</div>
</div>
<p>This method can also be used to annotate the barplot with other descriptive statistics like the percent. We can calculate the percents inside the loop and use these in the text argument of <code class="docutils literal notranslate"><span class="pre">plt.text()</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">myplot</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">mybars_df</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">],</span> <span class="n">mybars_df</span><span class="p">[</span><span class="s1">&#39;confecon&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">myplot</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
    <span class="n">xcoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_y</span><span class="p">()</span> <span class="o">+</span> <span class="mf">.5</span><span class="o">*</span><span class="n">rect</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
    <span class="n">ycoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span>
    <span class="n">pcent</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="n">ycoor</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">mybars_df</span><span class="p">[</span><span class="s1">&#39;confecon&#39;</span><span class="p">]),</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">ycoor</span><span class="p">,</span> <span class="n">xcoor</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">pcent</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;%&#39;</span><span class="p">,</span> 
             <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> 
             <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
             <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/ebee000b8dd00f0baea6847e882182c10f3eb5bf539a5e765f8df555662910e0.png" src="_images/ebee000b8dd00f0baea6847e882182c10f3eb5bf539a5e765f8df555662910e0.png" />
</div>
</div>
<p>The same code works to label a <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> barplot,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">myplot</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;confecon&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">mybars_df</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">myplot</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
    <span class="n">xcoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span> <span class="o">+</span> <span class="mf">.5</span><span class="o">*</span><span class="n">rect</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span>
    <span class="n">ycoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">xcoor</span><span class="p">,</span> <span class="n">ycoor</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">ycoor</span><span class="p">)),</span> 
             <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> 
             <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span>
             <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/d9a2357512722c3098ef0190ef96db0f9d22606201d823f5f9dde1d4f472282a.png" src="_images/d9a2357512722c3098ef0190ef96db0f9d22606201d823f5f9dde1d4f472282a.png" />
</div>
</div>
<p>and a horizontal <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> barplot:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">myplot</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;confecon&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">mybars_df</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">myplot</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
    <span class="n">ycoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_y</span><span class="p">()</span> <span class="o">+</span> <span class="mf">.5</span><span class="o">*</span><span class="n">rect</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
    <span class="n">xcoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">xcoor</span><span class="p">,</span> <span class="n">ycoor</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">xcoor</span><span class="p">)),</span> 
             <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> 
             <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
             <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/c67844c9c476cd78f8e13d32a72946558b2db3d048a2f8a5a97ff49b8caec485.png" src="_images/c67844c9c476cd78f8e13d32a72946558b2db3d048a2f8a5a97ff49b8caec485.png" />
</div>
</div>
<p>The same methods also work for barplots generated with the <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> method,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">myplot</span> <span class="o">=</span> <span class="n">mybars_df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;confecon&#39;</span><span class="p">,</span>
              <span class="n">figsize</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span>
              <span class="n">legend</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">myplot</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
    <span class="n">xcoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span> <span class="o">+</span> <span class="mf">.5</span><span class="o">*</span><span class="n">rect</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span>
    <span class="n">ycoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">xcoor</span><span class="p">,</span> <span class="n">ycoor</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">ycoor</span><span class="p">)),</span> 
             <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> 
             <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span>
             <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/76f6a11221b675e1582304c3c25d7624be8d9ff9f5ea9894f558a1fcb393f045.png" src="_images/76f6a11221b675e1582304c3c25d7624be8d9ff9f5ea9894f558a1fcb393f045.png" />
</div>
</div>
<p>and for horizontal barplots generated with <code class="docutils literal notranslate"><span class="pre">.plot()</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">myplot</span> <span class="o">=</span> <span class="n">mybars_df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;barh&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;confecon&#39;</span><span class="p">,</span>
              <span class="n">figsize</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span>
              <span class="n">legend</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">myplot</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
    <span class="n">ycoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_y</span><span class="p">()</span> <span class="o">+</span> <span class="mf">.5</span><span class="o">*</span><span class="n">rect</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
    <span class="n">xcoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">xcoor</span><span class="p">,</span> <span class="n">ycoor</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">xcoor</span><span class="p">)),</span> 
             <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> 
             <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
             <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/908bfda58b3e2f89225068fd4dcfbac76f450e7ab6f0a9c51ec27b90c00ceb23.png" src="_images/908bfda58b3e2f89225068fd4dcfbac76f450e7ab6f0a9c51ec27b90c00ceb23.png" />
</div>
</div>
</section>
<section id="grouped-and-stacked-bars">
<h4><a class="toc-backref" href="#id13" role="doc-backlink"><span class="section-number">11.2.1.4. </span>Grouped and Stacked Bars</a><a class="headerlink" href="#grouped-and-stacked-bars" title="Link to this heading">#</a></h4>
<p>We can group data according to more than one feature. For example, we can create the counts within every combination of economic worry-level and party affiliation:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anes_plot</span> <span class="o">=</span> <span class="n">anes</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;partyID&#39;</span><span class="p">,</span> <span class="s1">&#39;confecon&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
<span class="n">anes_plot</span> <span class="o">=</span> <span class="n">anes_plot</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">anes_plot</span> <span class="o">=</span> <span class="n">anes_plot</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span><span class="s1">&#39;count&#39;</span><span class="p">},</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">anes_plot</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>partyID</th>
      <th>confecon</th>
      <th>count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Democrat</td>
      <td>Not at all worried</td>
      <td>73</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Democrat</td>
      <td>A little worried</td>
      <td>320</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Democrat</td>
      <td>Moderately worried</td>
      <td>481</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Democrat</td>
      <td>Very worried</td>
      <td>284</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Democrat</td>
      <td>Extremely worried</td>
      <td>166</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Independent</td>
      <td>Not at all worried</td>
      <td>119</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Independent</td>
      <td>A little worried</td>
      <td>134</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Independent</td>
      <td>Moderately worried</td>
      <td>161</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Independent</td>
      <td>Very worried</td>
      <td>75</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Independent</td>
      <td>Extremely worried</td>
      <td>40</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Republican</td>
      <td>Not at all worried</td>
      <td>559</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Republican</td>
      <td>A little worried</td>
      <td>370</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Republican</td>
      <td>Moderately worried</td>
      <td>177</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Republican</td>
      <td>Very worried</td>
      <td>58</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Republican</td>
      <td>Extremely worried</td>
      <td>33</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We can create a barplot in which each economic worry level contains three bars, not just one, representing the three party affiliations. The bars can be color-coded according to party, and these colors can appear in a legend. The easiest way to construct such a visualization is with <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>: all we have to do is add an argument <code class="docutils literal notranslate"><span class="pre">hue</span></code> set equal to <code class="docutils literal notranslate"><span class="pre">partyID</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;confecon&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;partyID&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">anes_plot</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1a25c9ff10&gt;
</pre></div>
</div>
<img alt="_images/084cf7acd352df38e4a458ee9b4cb96e0c983f1ebb90ca806a3dc027b8432b04.png" src="_images/084cf7acd352df38e4a458ee9b4cb96e0c983f1ebb90ca806a3dc027b8432b04.png" />
</div>
</div>
<p>This figure can be annotated in all the ways we described above, with a title, axis labels, and numeric labels on each bar:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">myplot</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;confecon&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;partyID&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">anes_plot</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">myplot</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
    <span class="n">xcoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span> <span class="o">+</span> <span class="mf">.5</span><span class="o">*</span><span class="n">rect</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span>
    <span class="n">ycoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">xcoor</span><span class="p">,</span> <span class="n">ycoor</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">ycoor</span><span class="p">)),</span> 
             <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> 
             <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span>
             <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/8b39c593e555cbeed8aac61d006718e1d2ab5bf6a538f6e12a666b0d97777bc2.png" src="_images/8b39c593e555cbeed8aac61d006718e1d2ab5bf6a538f6e12a666b0d97777bc2.png" />
</div>
</div>
<p>The same method works in <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> when the bars are oriented horizontally:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">myplot</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;confecon&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;partyID&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">anes_plot</span><span class="p">,</span>
                <span class="n">orient</span> <span class="o">=</span><span class="s1">&#39;h&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">myplot</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
    <span class="n">ycoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_y</span><span class="p">()</span> <span class="o">+</span> <span class="mf">.5</span><span class="o">*</span><span class="n">rect</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
    <span class="n">xcoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">xcoor</span><span class="p">,</span> <span class="n">ycoor</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">xcoor</span><span class="p">)),</span> 
             <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> 
             <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
             <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/30bb7a38588b4e800b1aadc4e533db447e29f878dab23e332e1f6e81efee1fd3.png" src="_images/30bb7a38588b4e800b1aadc4e533db447e29f878dab23e332e1f6e81efee1fd3.png" />
</div>
</div>
<p>To generate grouped bars using the <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> method, we have to arrange the data so that one categorical feature comprises the rows and the other comprises the columns. We can either reshape the data or generate a cross-tab:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xtab</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">confecon</span><span class="p">,</span> <span class="n">anes</span><span class="o">.</span><span class="n">partyID</span><span class="p">)</span>
<span class="n">xtab</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>partyID</th>
      <th>Democrat</th>
      <th>Independent</th>
      <th>Republican</th>
    </tr>
    <tr>
      <th>confecon</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Not at all worried</th>
      <td>73</td>
      <td>119</td>
      <td>559</td>
    </tr>
    <tr>
      <th>A little worried</th>
      <td>320</td>
      <td>134</td>
      <td>370</td>
    </tr>
    <tr>
      <th>Moderately worried</th>
      <td>481</td>
      <td>161</td>
      <td>177</td>
    </tr>
    <tr>
      <th>Very worried</th>
      <td>284</td>
      <td>75</td>
      <td>58</td>
    </tr>
    <tr>
      <th>Extremely worried</th>
      <td>166</td>
      <td>40</td>
      <td>33</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>If we apply the <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> method to this cross-tab, we do not have to define the x and y features, as they are assumed to be the row and column indices. We can type:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">myplot</span> <span class="o">=</span> <span class="n">xtab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">myplot</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
    <span class="n">xcoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span> <span class="o">+</span> <span class="mf">.5</span><span class="o">*</span><span class="n">rect</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span>
    <span class="n">ycoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">xcoor</span><span class="p">,</span> <span class="n">ycoor</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">ycoor</span><span class="p">)),</span> 
             <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> 
             <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span>
             <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/4ab98665c44f227d3692b17f81af155cf6714432e352c6bf491f148f9692c6cf.png" src="_images/4ab98665c44f227d3692b17f81af155cf6714432e352c6bf491f148f9692c6cf.png" />
</div>
</div>
<p>We can swap the feature represented on the x-axis and the feature represented in the legend by switching the position of the two features in the cross tab:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xtab</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">partyID</span><span class="p">,</span> <span class="n">anes</span><span class="o">.</span><span class="n">confecon</span><span class="p">)</span>
<span class="n">myplot</span> <span class="o">=</span> <span class="n">xtab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">myplot</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
    <span class="n">xcoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span> <span class="o">+</span> <span class="mf">.5</span><span class="o">*</span><span class="n">rect</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span>
    <span class="n">ycoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">xcoor</span><span class="p">,</span> <span class="n">ycoor</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">ycoor</span><span class="p">)),</span> 
             <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> 
             <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span>
             <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/39c977e74567f0d4a57afd79352f68a795ae697cb3d11a017fb2da699b9cf55d.png" src="_images/39c977e74567f0d4a57afd79352f68a795ae697cb3d11a017fb2da699b9cf55d.png" />
</div>
</div>
<p>The code also works for horizontal barplots:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xtab</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">partyID</span><span class="p">,</span> <span class="n">anes</span><span class="o">.</span><span class="n">confecon</span><span class="p">)</span>
<span class="n">myplot</span> <span class="o">=</span> <span class="n">xtab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;barh&#39;</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span><span class="mi">10</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">myplot</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
    <span class="n">ycoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_y</span><span class="p">()</span> <span class="o">+</span> <span class="mf">.5</span><span class="o">*</span><span class="n">rect</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
    <span class="n">xcoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">xcoor</span><span class="p">,</span> <span class="n">ycoor</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">xcoor</span><span class="p">)),</span> 
             <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> 
             <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
             <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/6d1c733a55e0f079ecc0b598b24f51b825e44085bedc42b9ebc44c299797ce5a.png" src="_images/6d1c733a55e0f079ecc0b598b24f51b825e44085bedc42b9ebc44c299797ce5a.png" />
</div>
</div>
<p>To stack the bars on top of one another rather than placing them side-by-side, use the <code class="docutils literal notranslate"><span class="pre">stacked=True</span></code> argument:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xtab</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">confecon</span><span class="p">,</span> <span class="n">anes</span><span class="o">.</span><span class="n">partyID</span><span class="p">)</span>
<span class="n">myplot</span> <span class="o">=</span> <span class="n">xtab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;barh&#39;</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Amount of Worry About the Current State of the Economy&#39;)
</pre></div>
</div>
<img alt="_images/68113f7636953cb188bc67094b6b6e7b39bdcb2a0552947276a14da58f34688e.png" src="_images/68113f7636953cb188bc67094b6b6e7b39bdcb2a0552947276a14da58f34688e.png" />
</div>
</div>
</section>
<section id="placing-graphs-within-grids">
<h4><a class="toc-backref" href="#id14" role="doc-backlink"><span class="section-number">11.2.1.5. </span>Placing Graphs Within Grids</a><a class="headerlink" href="#placing-graphs-within-grids" title="Link to this heading">#</a></h4>
<p>Instead of grouping many bars in one plot, it can be cleaner and more effective to place multiple corresponding graphs in different cells inside a grid, one for each category of another feature. The easiest method for creating a grid of visualizations is to use the <code class="docutils literal notranslate"><span class="pre">sns.FacetGrid()</span></code> function and the <code class="docutils literal notranslate"><span class="pre">map()</span></code> method.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">sns.FacetGrid()</span></code> function takes a dataframe as its first argument, then we can specify the features whose categories comprise the rows and columns of this grid with the <code class="docutils literal notranslate"><span class="pre">row</span></code> and <code class="docutils literal notranslate"><span class="pre">col</span></code> arguments. Optionally, we can also change the color of the bars from cell to cell by setting <code class="docutils literal notranslate"><span class="pre">hue</span></code> equal to the row feature or the column feature. The <code class="docutils literal notranslate"><span class="pre">.map()</span></code> method operates on the output of <code class="docutils literal notranslate"><span class="pre">sns.FacetGrid()</span></code> and defines what the graph inside each cell should be.</p>
<p>For example, we can create six barplots, one for each combination of party affiliation and sex. We can set the rows to represent men and women and we can set the columns to represent Democrats, independents, and Republicans with the following code:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anes_plot</span> <span class="o">=</span> <span class="n">anes</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;partyID&#39;</span><span class="p">,</span> <span class="s1">&#39;sex&#39;</span><span class="p">,</span> <span class="s1">&#39;confecon&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">anes_plot</span> <span class="o">=</span> <span class="n">anes_plot</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span><span class="s1">&#39;count&#39;</span><span class="p">},</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">FacetGrid</span><span class="p">(</span><span class="n">anes_plot</span><span class="p">,</span> <span class="n">row</span> <span class="o">=</span> <span class="s1">&#39;sex&#39;</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;partyID&#39;</span><span class="p">,</span> <span class="n">hue</span> <span class="o">=</span> <span class="s1">&#39;partyID&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">barh</span><span class="p">,</span> <span class="s1">&#39;confecon&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;seaborn.axisgrid.FacetGrid at 0x1a26035790&gt;
</pre></div>
</div>
<img alt="_images/71c355df239beac997d36db0e6598a2e2f174aa198bcfbbb0ac97dc9eff074f2.png" src="_images/71c355df239beac997d36db0e6598a2e2f174aa198bcfbbb0ac97dc9eff074f2.png" />
</div>
</div>
<p>To change the size of a grid, use the <code class="docutils literal notranslate"><span class="pre">height</span></code> argument to specify the height of each graph inside the grid, and use <code class="docutils literal notranslate"><span class="pre">aspect</span></code> to control how much bigger or smaller the width should be relative to the height. <code class="docutils literal notranslate"><span class="pre">aspect=1</span></code> gives us a square within each cell, and <code class="docutils literal notranslate"><span class="pre">height=2,</span> <span class="pre">aspect=1.5</span></code> sets the widths to be 3:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">FacetGrid</span><span class="p">(</span><span class="n">anes_plot</span><span class="p">,</span> <span class="n">row</span> <span class="o">=</span> <span class="s1">&#39;sex&#39;</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;partyID&#39;</span><span class="p">,</span> <span class="n">hue</span> <span class="o">=</span> <span class="s1">&#39;partyID&#39;</span><span class="p">,</span>
                 <span class="n">height</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">barh</span><span class="p">,</span> <span class="s1">&#39;confecon&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;seaborn.axisgrid.FacetGrid at 0x1a26057a10&gt;
</pre></div>
</div>
<img alt="_images/801d91aa3686f6f3116bcf67b80d26196d338a75c158271f765f7416244f06a6.png" src="_images/801d91aa3686f6f3116bcf67b80d26196d338a75c158271f765f7416244f06a6.png" />
</div>
</div>
<p>The individual cells are given labels like “sex = Male|partyID = Democrat”. To give these cells better labels, we can write</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">g</span><span class="o">.</span><span class="n">set_titles</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{row_name}</span><span class="s1">, </span><span class="si">{col_name}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">{row_name}</span></code> is code that refers to the name of the category that defines the row, and <code class="docutils literal notranslate"><span class="pre">{col_name}</span></code> is code that refers to the name of the category that defines the column.</p>
<p>We can set the axis labels by typing</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">g</span><span class="o">.</span><span class="n">set_axis_labels</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">,</span> <span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span> 
</pre></div>
</div>
<p>where the first entry is the label of the x-axis in each cell, and the second entry is the label of the y-axis in each cell.</p>
<p>We can give the figure an overall title by typing</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy, by Party&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">g.fig.subplots_adjust(top=0.8)</span></code> function creates white space at the top of the grid to create space for the title, and the <code class="docutils literal notranslate"><span class="pre">g.fig.suptitle()</span></code> function sets the title and defines the fontsize of the title.</p>
<p>We can apply all of these functions to the grid as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">FacetGrid</span><span class="p">(</span><span class="n">anes_plot</span><span class="p">,</span> <span class="n">row</span> <span class="o">=</span> <span class="s1">&#39;sex&#39;</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;partyID&#39;</span><span class="p">,</span> <span class="n">hue</span> <span class="o">=</span> <span class="s1">&#39;partyID&#39;</span><span class="p">,</span>
                 <span class="n">height</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">barh</span><span class="p">,</span> <span class="s1">&#39;confecon&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">set_titles</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{row_name}</span><span class="s1">, </span><span class="si">{col_name}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">set_axis_labels</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">,</span> <span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span> 
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy, by Party&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 0.98, &#39;Amount of Worry About the Current State of the Economy, by Party&#39;)
</pre></div>
</div>
<img alt="_images/8af5d5157dd64dd3acfbdf9812ae53dad5bb61b95c7862d91208562d9d0ce956.png" src="_images/8af5d5157dd64dd3acfbdf9812ae53dad5bb61b95c7862d91208562d9d0ce956.png" />
</div>
</div>
<p>If we have only one grouping column, we can use only the <code class="docutils literal notranslate"><span class="pre">row</span></code> argument without <code class="docutils literal notranslate"><span class="pre">col</span></code> if we want all three graphs to be on top of one another in separate rows in the same column, as in the following example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anes_plot</span> <span class="o">=</span> <span class="n">anes</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;partyID&#39;</span><span class="p">,</span><span class="s1">&#39;confecon&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">anes_plot</span> <span class="o">=</span> <span class="n">anes_plot</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span><span class="s1">&#39;count&#39;</span><span class="p">},</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">FacetGrid</span><span class="p">(</span><span class="n">anes_plot</span><span class="p">,</span> <span class="n">row</span> <span class="o">=</span> <span class="s1">&#39;partyID&#39;</span><span class="p">,</span> <span class="n">hue</span> <span class="o">=</span> <span class="s1">&#39;partyID&#39;</span><span class="p">,</span>
                 <span class="n">height</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">barh</span><span class="p">,</span> <span class="s1">&#39;confecon&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">set_titles</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{row_name}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">set_axis_labels</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">,</span> <span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span> 
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">.925</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy, by Party&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 0.98, &#39;Amount of Worry About the Current State of the Economy, by Party&#39;)
</pre></div>
</div>
<img alt="_images/f9145aa6edd70ec79ffcc79d674b972012cac9b55fa5ebbf92c2eb85d429117f.png" src="_images/f9145aa6edd70ec79ffcc79d674b972012cac9b55fa5ebbf92c2eb85d429117f.png" />
</div>
</div>
<p>Or we can use only the <code class="docutils literal notranslate"><span class="pre">col</span></code> argument without <code class="docutils literal notranslate"><span class="pre">row</span></code> if we want all three graphs to be side-by-side in one row:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">FacetGrid</span><span class="p">(</span><span class="n">anes_plot</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;partyID&#39;</span><span class="p">,</span> <span class="n">hue</span> <span class="o">=</span> <span class="s1">&#39;partyID&#39;</span><span class="p">,</span>
                 <span class="n">height</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">barh</span><span class="p">,</span> <span class="s1">&#39;confecon&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">set_titles</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{col_name}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">set_axis_labels</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">,</span> <span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span> 
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">.8</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy, by Party&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 0.98, &#39;Amount of Worry About the Current State of the Economy, by Party&#39;)
</pre></div>
</div>
<img alt="_images/ffed08b849658fcfa9d907d0cdfa95fbdac0817cf50670aca46062092af48f77.png" src="_images/ffed08b849658fcfa9d907d0cdfa95fbdac0817cf50670aca46062092af48f77.png" />
</div>
</div>
<p>If we have many categories, we can use the <code class="docutils literal notranslate"><span class="pre">col_wrap</span></code> argument to specify how many plots will be listed in each row before moving on to the next row. For example, we can list the economic anxiety by age group, creating nine age groups, and placing these graphs in a 3x3 grid:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anes_plot</span> <span class="o">=</span> <span class="n">anes</span>
<span class="n">anes_plot</span><span class="p">[</span><span class="s1">&#39;age_cat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">age</span><span class="p">,</span> <span class="p">[</span><span class="mi">17</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">55</span><span class="p">,</span><span class="mi">65</span><span class="p">,</span><span class="mi">75</span><span class="p">,</span><span class="mi">85</span><span class="p">,</span><span class="mi">100</span><span class="p">])</span>
<span class="n">anes_plot</span> <span class="o">=</span> <span class="n">anes_plot</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;confecon&#39;</span><span class="p">,</span><span class="s1">&#39;age_cat&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">anes_plot</span> <span class="o">=</span> <span class="n">anes_plot</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span><span class="s1">&#39;count&#39;</span><span class="p">},</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">FacetGrid</span><span class="p">(</span><span class="n">anes_plot</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;age_cat&#39;</span><span class="p">,</span> <span class="n">col_wrap</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;confecon&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">set_titles</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{col_name}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">set_axis_labels</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">,</span> <span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span> 
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">.9</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy, by Age Group&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 0.98, &#39;Amount of Worry About the Current State of the Economy, by Age Group&#39;)
</pre></div>
</div>
<img alt="_images/9fc9f66daaec1e910760e9c36590e84d09e55d7be95df9435b534e052158e936.png" src="_images/9fc9f66daaec1e910760e9c36590e84d09e55d7be95df9435b534e052158e936.png" />
</div>
</div>
</section>
<section id="saving-a-figure-as-a-local-file">
<h4><a class="toc-backref" href="#id15" role="doc-backlink"><span class="section-number">11.2.1.6. </span>Saving a Figure as a Local File</a><a class="headerlink" href="#saving-a-figure-as-a-local-file" title="Link to this heading">#</a></h4>
<p>To save a visualization that appears in your notebook as a local file, use the <code class="docutils literal notranslate"><span class="pre">plt.savefig()</span></code> function immediately after the code that generates and displays the figure. To save as a JPG, PNG, and PDF file, write a filename that ends with a “.jpg”, “.png”, or “.pdf” extension respectively inside of <code class="docutils literal notranslate"><span class="pre">plt.savefig()</span></code>. The file will save in your current working directory, which you can see by importing the <code class="docutils literal notranslate"><span class="pre">os</span></code> package and typing <code class="docutils literal notranslate"><span class="pre">os.getcwd()</span></code> and change with the <code class="docutils literal notranslate"><span class="pre">os.chdir()</span></code> function.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">plt.savefig()</span></code> function works with <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>, and <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> figures.</p>
<p>For example, we can save the following <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> figure to disk as a JPG file:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">myplot</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">mybars_df</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">],</span> <span class="n">mybars_df</span><span class="p">[</span><span class="s1">&#39;confecon&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">myplot</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
    <span class="n">xcoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_y</span><span class="p">()</span> <span class="o">+</span> <span class="mf">.5</span><span class="o">*</span><span class="n">rect</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
    <span class="n">ycoor</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">ycoor</span><span class="p">,</span> <span class="n">xcoor</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ycoor</span><span class="p">),</span> 
             <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> 
             <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
             <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;myfigure.jpg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/19550a419d46069390d6ebc18ae938317085a780c87453921834543bbc8c5a1d.png" src="_images/19550a419d46069390d6ebc18ae938317085a780c87453921834543bbc8c5a1d.png" />
</div>
</div>
<p>We can save the following <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> figure as a PNG file:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">FacetGrid</span><span class="p">(</span><span class="n">anes_plot</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;age_cat&#39;</span><span class="p">,</span> <span class="n">col_wrap</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">barh</span><span class="p">,</span> <span class="s1">&#39;confecon&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">set_titles</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{col_name}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">set_axis_labels</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">,</span> <span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span> 
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">.9</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy, by Age Group&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;myfigure2.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/2921d5cafd0981fa0f6f3a165eabb5229f4edb4b0c5a43d5c9bf61d07ce00cbe.png" src="_images/2921d5cafd0981fa0f6f3a165eabb5229f4edb4b0c5a43d5c9bf61d07ce00cbe.png" />
</div>
</div>
<p>And we can save the following <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> figure as a PDF:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">myplot</span> <span class="o">=</span> <span class="n">xtab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;barh&#39;</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Level of worry&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of people&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Amount of Worry About the Current State of the Economy&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;myfigure3.pdf&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/68113f7636953cb188bc67094b6b6e7b39bdcb2a0552947276a14da58f34688e.png" src="_images/68113f7636953cb188bc67094b6b6e7b39bdcb2a0552947276a14da58f34688e.png" />
</div>
</div>
</section>
</section>
<section id="scatterplots">
<h3><a class="toc-backref" href="#id16" role="doc-backlink"><span class="section-number">11.2.2. </span>Scatterplots</a><a class="headerlink" href="#scatterplots" title="Link to this heading">#</a></h3>
<p>In the preceding section on barplots, we discussed how to generate visualizations using <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>, and the <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> method for a <code class="docutils literal notranslate"><span class="pre">pandas</span></code> dataframe. In this section and the following ones, we will focus on <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> as this package usually creates visually appealing graphics with simpler code. We will use <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> and <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> only in situations in which a specific kind of visualization is easier to build with one of these packages.</p>
<p>Scatterplots are used to illustrate the correlational relationship between two continous features. One feature’s values are used as x-coordinates and the other feature’s values are used as y-coordinates, and these coordinates define points that are plotted on a Cartesian coordinate plane. We can annotate a scatterplot in a few ways. First we can use an aesthethic like color-coding or shapes to denote the value of a third categorical feature from point to point. For example, if the points represent individual people, we can use red points for the women and blue points for the men, or squares for people from Virginia and triangles for people from Maryland. We can also add a <strong>line of best fit</strong> to a scatterplot, which is derived from a simple linear regression model, to show the overall relationship between the features: a positive slope indicates a positive correlation and a relationship in which the features tend to increase or decrease together; a negative slope indicates a negative correlation and a relationship in which one feature tends to increase as the other decreases.</p>
<p>We can also change the background of <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> graphs. For scatterplots, it can be useful to display gridlines in the background to better match points to values on the x and y axies. To see this grid, type:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">color_codes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="using-colors-shapes-and-transparency-to-annotate-scatterplots">
<h4><a class="toc-backref" href="#id17" role="doc-backlink"><span class="section-number">11.2.2.1. </span>Using Colors, Shapes, and Transparency to Annotate Scatterplots</a><a class="headerlink" href="#using-colors-shapes-and-transparency-to-annotate-scatterplots" title="Link to this heading">#</a></h4>
<p>To generate a scatterplot from <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>, use the <code class="docutils literal notranslate"><span class="pre">sns.scatterplot()</span></code> function. Like the <code class="docutils literal notranslate"><span class="pre">sns.barplot()</span></code> function, we specify features for the x and y axes and the dataframe where these features are stored. For example, we can plot people’s thermometer rating of Donald Trump against their thermometer rating of Joe Biden. For the sake of clarity, I only include the first 200 rows of <code class="docutils literal notranslate"><span class="pre">anes</span></code> for now:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;fttrump&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">anes</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">200</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1a27ac3450&gt;
</pre></div>
</div>
<img alt="_images/2a006830c08cba9966c2ad8fdee0449ba810be48edc59100f66da95b1b5e8381.png" src="_images/2a006830c08cba9966c2ad8fdee0449ba810be48edc59100f66da95b1b5e8381.png" />
</div>
</div>
<p>We can change the size of the scatterplot in the notebook with the <code class="docutils literal notranslate"><span class="pre">plt.figure()</span></code> function, and we can label the axes and add a title as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;fttrump&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">anes</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">200</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Joe Biden thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Donald Trump thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Evaluations of Biden vs. Trump&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Evaluations of Biden vs. Trump&#39;)
</pre></div>
</div>
<img alt="_images/17a38b1641259f57626ae1198dd2f9a4e77e9b67f3350f07f4019afe9549aa27.png" src="_images/17a38b1641259f57626ae1198dd2f9a4e77e9b67f3350f07f4019afe9549aa27.png" />
</div>
</div>
<p>There are many ways to use aesthetics to include additional features in a scatterplot. First we can color-code points to represent categories of a different feature using the <code class="docutils literal notranslate"><span class="pre">hue</span></code> argument. We can represent party affiliation this way:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;fttrump&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">anes</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">200</span><span class="p">),</span>
               <span class="n">hue</span> <span class="o">=</span> <span class="s1">&#39;partyID&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Joe Biden thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Donald Trump thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Evaluations of Biden vs. Trump&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Evaluations of Biden vs. Trump&#39;)
</pre></div>
</div>
<img alt="_images/54f3923d611dd0ad6c7bedbbaf4f486eb5d969f7b664384c888828b1e6b69c38.png" src="_images/54f3923d611dd0ad6c7bedbbaf4f486eb5d969f7b664384c888828b1e6b69c38.png" />
</div>
</div>
<p>As expected, Republicans cluster in the top-left corner with high ratings for Trump and low ratings for Biden, and Democrats cluster in the bottom-right corner with high ratings for Biden and low ratings for Trump. Independents are spread out and are more common in the middle. No one rates both Trump and Biden both over 80.</p>
<p>Note that when we include an aesthetic, <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> creates a legend automatically. Legends are crucial as it would be unclear what the colors represent without one. To turn off the legend, however, we can include the <code class="docutils literal notranslate"><span class="pre">legend=False</span></code> argument in <code class="docutils literal notranslate"><span class="pre">sns.scatterplot()</span></code>.</p>
<p>We can use different symbols to represent these categories with the <code class="docutils literal notranslate"><span class="pre">style</span></code> argument. The following figure uses different symbols for men and women:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;fttrump&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">anes</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">200</span><span class="p">),</span>
               <span class="n">style</span> <span class="o">=</span> <span class="s1">&#39;sex&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Joe Biden thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Donald Trump thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Evaluations of Biden vs. Trump&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Evaluations of Biden vs. Trump&#39;)
</pre></div>
</div>
<img alt="_images/e1ad642d7f8ab3f153f56e59ef196f1c6687883e7b1d2ba7bcade1a99fa443d9.png" src="_images/e1ad642d7f8ab3f153f56e59ef196f1c6687883e7b1d2ba7bcade1a99fa443d9.png" />
</div>
</div>
<p>My personal opinion, however, is that shapes do not tend to convey information very well without color-coding points as well. If all of the points are blue, it can be hard to tell the dots from the Xs.</p>
<p>We can use both color and style aesthetics in the same scatterplot. The following graph uses both colors and shapes for partyID:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;fttrump&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">anes</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">200</span><span class="p">),</span>
               <span class="n">hue</span> <span class="o">=</span> <span class="s1">&#39;partyID&#39;</span><span class="p">,</span> <span class="n">style</span> <span class="o">=</span> <span class="s1">&#39;partyID&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Joe Biden thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Donald Trump thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Evaluations of Biden vs. Trump&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Evaluations of Biden vs. Trump&#39;)
</pre></div>
</div>
<img alt="_images/9d694a03a93cf1d24a72652c3b1b4b5a06d2318703550f134708bc85d225a945.png" src="_images/9d694a03a93cf1d24a72652c3b1b4b5a06d2318703550f134708bc85d225a945.png" />
</div>
</div>
<p>We can set colors to represent one feature while shapes represent another. In this case, both aesthetic mappings are listed in the legend. Here is a scatterplot that uses color for <code class="docutils literal notranslate"><span class="pre">partyID</span></code> and shapes for <code class="docutils literal notranslate"><span class="pre">sex</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;fttrump&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">anes</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">200</span><span class="p">),</span>
               <span class="n">hue</span> <span class="o">=</span> <span class="s1">&#39;partyID&#39;</span><span class="p">,</span> <span class="n">style</span> <span class="o">=</span> <span class="s1">&#39;sex&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Joe Biden thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Donald Trump thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Evaluations of Biden vs. Trump&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Evaluations of Biden vs. Trump&#39;)
</pre></div>
</div>
<img alt="_images/3a6e7ba489bc008132ff7b8b6e9b01b90e452718063eaafabfd2c988e7439462.png" src="_images/3a6e7ba489bc008132ff7b8b6e9b01b90e452718063eaafabfd2c988e7439462.png" />
</div>
</div>
<p>We can control the transparency of the points with the <code class="docutils literal notranslate"><span class="pre">alpha</span></code> argument. <code class="docutils literal notranslate"><span class="pre">alpha</span></code> ranges between 0 and 1, where 0 means perfectly transparent, 1 means perfectly solid, and values between 0 and 1 represent degrees of transparency. When points are partially transparent, areas with many points become darker, so the main purpose of transparency is to illustrate the areas in the scatterplot with higher densities of data. Below I list two scatterplots, each with the points set to black instead of the default blue, and each with all of the rows in <code class="docutils literal notranslate"><span class="pre">anes</span></code>. The first scatterplot uses solid dots and the second uses <code class="docutils literal notranslate"><span class="pre">alpha=.1</span></code> to make the dots mostly transparent. Notice how the clusters emerge in the second scatterplot:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;fttrump&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">anes</span><span class="p">,</span>
               <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;black&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Joe Biden thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Donald Trump thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;No Transparency&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;fttrump&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">anes</span><span class="p">,</span>
               <span class="n">alpha</span> <span class="o">=</span> <span class="mf">.1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;black&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Joe Biden thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Donald Trump thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Transparency (alpha=.1) Shows Where the Data Cluster&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Transparency (alpha=.1) Shows Where the Data Cluster&#39;)
</pre></div>
</div>
<img alt="_images/da8a3df2517a19008e18a7a7e6a30514b78829b2759b1256747d09f430cf8797.png" src="_images/da8a3df2517a19008e18a7a7e6a30514b78829b2759b1256747d09f430cf8797.png" />
<img alt="_images/0483c893691aee9bde94c315bc6c27d7dc698bf1ef2896a5401d835ee947150c.png" src="_images/0483c893691aee9bde94c315bc6c27d7dc698bf1ef2896a5401d835ee947150c.png" />
</div>
</div>
<p>The darkest parts of the graph are the areas with the most common ratings of (Trump, Biden). These are (100, 0), (0, 100), (0, 50), (50, 50), and (0,0). Areas along the axes, rating one candidate at 0, are more common than other areas on the graph.</p>
<p>We can also use the size of the points to represent values of a feature. We use the <code class="docutils literal notranslate"><span class="pre">size</span></code> argument to map a feature to size, and we use <code class="docutils literal notranslate"><span class="pre">sizes</span></code> to set a range of radii from smallest to largest depending on the value of the feature listed with <code class="docutils literal notranslate"><span class="pre">size</span></code>. In the following graph, I use both color and size to represent age, where larger dots and darker shades represent older individuals:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;fttrump&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">anes</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">200</span><span class="p">),</span>
               <span class="n">size</span> <span class="o">=</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="n">sizes</span><span class="o">=</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">360</span><span class="p">),</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">.5</span><span class="p">,</span>
               <span class="n">hue</span> <span class="o">=</span> <span class="s1">&#39;age&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Joe Biden thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Donald Trump thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Evaluations of Biden vs. Trump&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Evaluations of Biden vs. Trump&#39;)
</pre></div>
</div>
<img alt="_images/840b5e34dde8e42f55d4e9ba16eb771b5f1d22f26047e1107cec9cebcc1ad625.png" src="_images/840b5e34dde8e42f55d4e9ba16eb771b5f1d22f26047e1107cec9cebcc1ad625.png" />
</div>
</div>
<p>I don’t recommend using size to represent data, however, as larger points tend to obscure smaller points.</p>
</section>
<section id="including-lines-of-best-fit">
<h4><a class="toc-backref" href="#id18" role="doc-backlink"><span class="section-number">11.2.2.2. </span>Including Lines of Best Fit</a><a class="headerlink" href="#including-lines-of-best-fit" title="Link to this heading">#</a></h4>
<p>Scatterplots are designed to illustrate the relationship between two features, but it can be hard to see this relationship when there are lot of datapoints or when the data have a lot of variance.  We can include a line of best fit on a scatterplot to explictly show the relationship by using the <code class="docutils literal notranslate"><span class="pre">sns.regplot()</span></code> function instead of <code class="docutils literal notranslate"><span class="pre">sns.scatterplot()</span></code>. <code class="docutils literal notranslate"><span class="pre">sns.regplot()</span></code> sometimes expands the range of the x and y axes beyond the data to better show the complete line of best fit.</p>
<p>The Trump vs. Biden scatterplot with a linear fit is as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;fttrump&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">anes</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">200</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Joe Biden thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Donald Trump thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Evaluations of Biden vs. Trump&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Evaluations of Biden vs. Trump&#39;)
</pre></div>
</div>
<img alt="_images/5be3041a268127a4e53d0598076186684b769762461a9c1596b2cbfc1559d0dc.png" src="_images/5be3041a268127a4e53d0598076186684b769762461a9c1596b2cbfc1559d0dc.png" />
</div>
</div>
<p>This line represents the predicted values of the Trump thermometer given a value of the Biden thermometer, as derived from a simple regression model in which the Trump thermometer is regressed on the Biden thermometer and a intercept is included. There are a few ways to understand the line:</p>
<ul class="simple">
<li><p>First, consider the slope. Positive slopes show a positive relationship between the features so that they tend to increase or decrease together. In this case the slope is negative, which shows that as the Biden thermometer increases, the Trump thermometer decreases. Flat slopes indicate a weak relationship or no relationship between the features.</p></li>
<li><p>Second, the line can be used to generate predictions. First choose a value on the x axis of interest, then find the y-coordinate at which the line passes through this position on the x-axis. This y-coordinate is the predicted value of the feature on the y-axis given the value of the feature on the x-axis. For example, suppose that a person rates Joe Biden 60. We find 60 on the x-axis and follow it up to the line, which crosses this value when y is about 28. So a person who rates Biden 60 is predicted to rate Trump 28.</p></li>
<li><p>Third, the shaded area around the line is the 95% confidence interval around the prediction. This interval provides a range of feasible values for the prediction at any value of x. The more datapoints in the graph, and the closer they are on average to the line, the smaller this region will be. For a person who rates Biden 60, the lower bound of this interval is at about 25 on the y-axis and the upper bound of the interval is at about 31. So while our prediction for a person who rates Biden 60 is that they will rate Trump 28, our 95% confidence interval for this prediction is between 25 and 31.</p></li>
</ul>
<p>Notice that the linear prediction overestimates the ratings for Trump for those who rate Biden about 60: almost all of these individuals rate Trump lower than that. Over overestiation is due to the constraint of a straight line for the entire scatterplot. There are alternatives to a linear fit that allow for curved, nonlinear relationships between features. First, if we specify <code class="docutils literal notranslate"><span class="pre">order=2</span></code>, then <code class="docutils literal notranslate"><span class="pre">sns.regplot()</span></code> uses a parabola to model the relationship instead of a line:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;fttrump&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">anes</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">200</span><span class="p">),</span>
           <span class="n">order</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Joe Biden thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Donald Trump thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Evaluations of Biden vs. Trump&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Evaluations of Biden vs. Trump&#39;)
</pre></div>
</div>
<img alt="_images/2466ddbad2bbfa541b4f997d1c1020c327345e6b5205db7f652fc329bb2004fe.png" src="_images/2466ddbad2bbfa541b4f997d1c1020c327345e6b5205db7f652fc329bb2004fe.png" />
</div>
</div>
<p>We can also use <code class="docutils literal notranslate"><span class="pre">lowess=True</span></code>. LOWESS stands for <a class="reference external" href="https://en.wikipedia.org/wiki/Local_regression">locally weighted scatterplot smoothing</a>, and it estimates the relationship between the features in local regions on the scatterplot, connecting the polynomials to form one curved line through the data. The result is a visualization of a nonlinear relationship that can bend in ways not possible with a polynomial. The LOWESS fit for the Trump vs Biden scatterplot is:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;fttrump&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">anes</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">200</span><span class="p">),</span>
           <span class="n">lowess</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Joe Biden thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Donald Trump thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Evaluations of Biden vs. Trump&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Evaluations of Biden vs. Trump&#39;)
</pre></div>
</div>
<img alt="_images/cf489263922b78a8001dc7a8374695f2d63b7db138403367765cf1614b1986ea.png" src="_images/cf489263922b78a8001dc7a8374695f2d63b7db138403367765cf1614b1986ea.png" />
</div>
</div>
</section>
<section id="scatterplot-grids-and-matrices">
<h4><a class="toc-backref" href="#id19" role="doc-backlink"><span class="section-number">11.2.2.3. </span>Scatterplot Grids and Matrices</a><a class="headerlink" href="#scatterplot-grids-and-matrices" title="Link to this heading">#</a></h4>
<p>It can be useful to see related scatterplots side by side or in a grid. We can use the <code class="docutils literal notranslate"><span class="pre">sns.FacetGrid()</span></code> function to divide the rows into subsets according to a categorical feature, then to generate different versions of the same scatterplot for each subset. <code class="docutils literal notranslate"><span class="pre">sns.FacetGrid()</span></code> allows us to place these scatterplots side-by-side.</p>
<p>For example, here is the code to create three scatterplots of the Trump and Biden thermometers. It largely follows the same syntax that we used to generate a facet grid of barplots, but I pass the <code class="docutils literal notranslate"><span class="pre">sns.scatterplot()</span></code> function to <code class="docutils literal notranslate"><span class="pre">.map()</span></code> method along with aesthetic parameters I want to apply to each graph: <code class="docutils literal notranslate"><span class="pre">alpha=.1</span></code> and <code class="docutils literal notranslate"><span class="pre">color='black'</span></code> to help reveal the clustering in each scatterplot:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">FacetGrid</span><span class="p">(</span><span class="n">anes</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;partyID&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">,</span> <span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="s1">&#39;fttrump&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">.1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">set_titles</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{col_name}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">set_axis_labels</span><span class="p">(</span><span class="s1">&#39;Joe Biden thermometer rating&#39;</span><span class="p">,</span> <span class="s1">&#39;Donald Trump thermometer rating&#39;</span><span class="p">)</span> 
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">.8</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Evaluations of Biden vs. Trump, by Party&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 0.98, &#39;Evaluations of Biden vs. Trump, by Party&#39;)
</pre></div>
</div>
<img alt="_images/588e68cd88433e36fb2a4ab072f952d16f37598e3dfde08cd147399e249d89c6.png" src="_images/588e68cd88433e36fb2a4ab072f952d16f37598e3dfde08cd147399e249d89c6.png" />
</div>
</div>
<p>Now that we’ve separated the Democrats, Republicans, and independents, we can more clearly see how each group clusters in terms of their ratings of Trump and Biden. Democrats are mostly united in rating Trump very low, but the spread along the x-axis indicates a wide range of mixed feelings towards Biden. Republicans in contrast are more clustered around higher ratings for Trump.</p>
<p>Another way to see scatterplots side-by-side is with a scatterplot matrix, which we can generate with the <code class="docutils literal notranslate"><span class="pre">sns.pairplot()</span></code> function. For every feature in the data that we pass to this function, <code class="docutils literal notranslate"><span class="pre">sns.pairplot()</span></code> adds another row and column in a grid of scatterplots. Along the diagonal of this grid are plots that describe the overall distribution of the feature in question, and these plots can be histograms or densities. The off-diagonal graphs are scatterplots in which the feature represented in the row comprises the y-axis and the feature represented in the column comprises the x-axis. The following code shows the scatterplots between the Trump, Biden, Obama, and Sanders thermometers, uses densities on the diagonals, includes best fit lines, and turns the points partially transparent. I also use a for-loop to set the x and y axes in each of the non-diagonal graphs to range from 0 to 100:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">pairplot</span><span class="p">(</span><span class="n">anes</span><span class="p">[[</span><span class="s1">&#39;fttrump&#39;</span><span class="p">,</span> <span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="s1">&#39;ftobama&#39;</span><span class="p">,</span> <span class="s1">&#39;ftsanders&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">200</span><span class="p">),</span>
            <span class="n">diag_kind</span> <span class="o">=</span> <span class="s1">&#39;kde&#39;</span><span class="p">,</span>
            <span class="n">kind</span> <span class="o">=</span> <span class="s1">&#39;reg&#39;</span><span class="p">,</span>
            <span class="n">plot_kws</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;line_kws&#39;</span><span class="p">:{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span><span class="s1">&#39;red&#39;</span><span class="p">},</span> <span class="s1">&#39;scatter_kws&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;alpha&#39;</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">}})</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">i</span><span class="p">):</span>
        <span class="n">g</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span>
        <span class="n">g</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span>
        <span class="n">g</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span>
        <span class="n">g</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/cbacf0c2788386cf0e771feb50f67752a5010303f1d8c4f171dc04c3e89132d7.png" src="_images/cbacf0c2788386cf0e771feb50f67752a5010303f1d8c4f171dc04c3e89132d7.png" />
</div>
</div>
<p>My personal preference however is to avoid scatterplot matrices because these figures can be very complicated, and although they contain a lot of informaation, they are not very efficient at conveying a cohesive story.</p>
</section>
</section>
<section id="line-plots">
<h3><a class="toc-backref" href="#id20" role="doc-backlink"><span class="section-number">11.2.3. </span>Line Plots</a><a class="headerlink" href="#line-plots" title="Link to this heading">#</a></h3>
<p>Line plots are used to illustrate the relationship between a continuous feature and an index. An index is a continuous feature in which the order of the rows has meaning, and the most common index is time, ordered from earlier to later time points. If multiple continuous features have similar scales, they can be plotted with overlaid lines against the same index. In that case, we can use different line colors to distinguish between the lines, or different line types (solid, dashed, dotted, etc.). If the features have very different scales, then it is possible to use two different y-axes in one line plot, with the values for one axis listed on the left and the values for the other axis listed on the right, as in the following example:</p>
<figure class="image">
<center>
<img src="https://i.imgur.com/OfQYQW8.png" width='700'>
<figcaption> Per capita consumption of cheese (US)
correlates with the number of people who died by becoming tangled in their bedsheets. (Source: Spurious Correlations by Tyler Vigen <a href="https://tylervigen.com/old-version.html">https://tylervigen.com/old-version.html</a>).</figcaption>
</center>
</figure>
<p>The use of multiple axes however is generally frowned upon by statisticians and data scientists because they can lead to problems such as Darrell Huff’s Gee-Whiz Graphs that overemphasize changes in a feature by manipulating the scale of an axis. They also show strong relationships between features that have no relationship beyond a shared upward trend over time, as is the case in the above figure (unless we can find a compelling scientific argument for why increased cheese consumption would cause people to die by becoming entangled in their bedsheets). As such, we will not discuss line plots with multiple axes here.</p>
<p>As with scatterplots, we will focus on using <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> to create line plots because <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> produces good-looking visualizations with comparatively simple code.</p>
<p>To plot a single feature over values on an index, create a dataframe with the index and the feature. Here we calculate the average rating of Joe Biden within each age represented in the data, up to age 84:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anes_line</span> <span class="o">=</span> <span class="n">anes</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;ftbiden&#39;</span><span class="p">:</span><span class="s1">&#39;mean&#39;</span><span class="p">})</span>
<span class="n">anes_line</span> <span class="o">=</span> <span class="n">anes_line</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">65</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">anes_line</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>ftbiden</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>20</td>
      <td>43.604651</td>
    </tr>
    <tr>
      <th>1</th>
      <td>21</td>
      <td>48.709677</td>
    </tr>
    <tr>
      <th>2</th>
      <td>22</td>
      <td>38.827586</td>
    </tr>
    <tr>
      <th>3</th>
      <td>23</td>
      <td>40.785714</td>
    </tr>
    <tr>
      <th>4</th>
      <td>24</td>
      <td>51.640000</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>60</th>
      <td>80</td>
      <td>37.444444</td>
    </tr>
    <tr>
      <th>61</th>
      <td>81</td>
      <td>31.263158</td>
    </tr>
    <tr>
      <th>62</th>
      <td>82</td>
      <td>44.000000</td>
    </tr>
    <tr>
      <th>63</th>
      <td>83</td>
      <td>29.615385</td>
    </tr>
    <tr>
      <th>64</th>
      <td>84</td>
      <td>28.500000</td>
    </tr>
  </tbody>
</table>
<p>65 rows × 2 columns</p>
</div></div></div>
</div>
<p>To generate a line plot, we use the <code class="docutils literal notranslate"><span class="pre">sns.lineplot()</span></code> function. This function works just like <code class="docutils literal notranslate"><span class="pre">sns.barplot()</span></code> and <code class="docutils literal notranslate"><span class="pre">sns.scatterplot()</span></code>. We specify the features to represent on the x and y axes and we can use <code class="docutils literal notranslate"><span class="pre">plt.figure()</span></code>, <code class="docutils literal notranslate"><span class="pre">plt.xlabel()</span></code>, <code class="docutils literal notranslate"><span class="pre">plt.ylabel()</span></code>, and <code class="docutils literal notranslate"><span class="pre">plt.title()</span></code> to control the size of the figure, label the axes, and add a title. Here we plot the average Biden ratings against the age groups:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">anes_line</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Age of voters&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Joe Biden thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Feeling Thermometer Ratings By Age Group&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Feeling Thermometer Ratings By Age Group&#39;)
</pre></div>
</div>
<img alt="_images/44791815d5cdbef9de71e29d00e15e1c2c33203ee8c2a426821196b9ee0fafbe.png" src="_images/44791815d5cdbef9de71e29d00e15e1c2c33203ee8c2a426821196b9ee0fafbe.png" />
</div>
</div>
<p>Notice that the y-axis, by default, is set to a range slightly larger than the range of the data. That can misrepresent the degree to which the data change. A more honest presentation expands the y-axis to the full range of possible values for a feeling thermometer, from 0 to 100. We can expand the range by typing <code class="docutils literal notranslate"><span class="pre">plt.ylim(0,100)</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">anes_line</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Age of voters&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Joe Biden thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Feeling Thermometer Ratings By Age Group&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(0.0, 100.0)
</pre></div>
</div>
<img alt="_images/cfdd16885f39745cd4b0cc0b17ee2fd9cde7e80a7062f6205f4be341b6408ece.png" src="_images/cfdd16885f39745cd4b0cc0b17ee2fd9cde7e80a7062f6205f4be341b6408ece.png" />
</div>
</div>
<p>To plot multiple features against the same index, create a dataframe that is reshaped to long format. In this case, we can use techniques we discussed in chapters 8 and 9 to create a dataframe  with three columns: age, candidate (the subject of each feeling thermometer), and the values of the thermometers. We place the thermometers for Biden, Trump, Barack Obama, and Bernie Sanders in this dataframe:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anes_line</span> <span class="o">=</span> <span class="n">anes</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;ftbiden&#39;</span><span class="p">:</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span>
                                    <span class="s1">&#39;fttrump&#39;</span><span class="p">:</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span>
                                    <span class="s1">&#39;ftobama&#39;</span><span class="p">:</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span>
                                    <span class="s1">&#39;ftsanders&#39;</span><span class="p">:</span><span class="s1">&#39;mean&#39;</span><span class="p">})</span>
<span class="n">anes_line</span> <span class="o">=</span> <span class="n">anes_line</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">65</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">anes_line</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">anes_line</span><span class="p">,</span> <span class="n">id_vars</span><span class="o">=</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> 
                    <span class="n">value_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="s1">&#39;fttrump&#39;</span><span class="p">,</span> <span class="s1">&#39;ftobama&#39;</span><span class="p">,</span> <span class="s1">&#39;ftsanders&#39;</span><span class="p">])</span>
<span class="n">anes_line</span> <span class="o">=</span> <span class="n">anes_line</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s1">&#39;variable&#39;</span><span class="p">:</span><span class="s1">&#39;candidate&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="s1">&#39;thermometer&#39;</span><span class="p">},</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">anes_line</span><span class="p">[</span><span class="s1">&#39;candidate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">anes_line</span><span class="p">[</span><span class="s1">&#39;candidate&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s1">&#39;ftbiden&#39;</span><span class="p">:</span><span class="s1">&#39;Joe Biden&#39;</span><span class="p">,</span>
                                                     <span class="s1">&#39;fttrump&#39;</span><span class="p">:</span><span class="s1">&#39;Donald Trump&#39;</span><span class="p">,</span>
                                                     <span class="s1">&#39;ftobama&#39;</span><span class="p">:</span><span class="s1">&#39;Barack Obama&#39;</span><span class="p">,</span>
                                                     <span class="s1">&#39;ftsanders&#39;</span><span class="p">:</span><span class="s1">&#39;Bernie Sanders&#39;</span><span class="p">})</span>
<span class="n">anes_line</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>candidate</th>
      <th>thermometer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>20</td>
      <td>Joe Biden</td>
      <td>43.604651</td>
    </tr>
    <tr>
      <th>1</th>
      <td>21</td>
      <td>Joe Biden</td>
      <td>48.709677</td>
    </tr>
    <tr>
      <th>2</th>
      <td>22</td>
      <td>Joe Biden</td>
      <td>38.827586</td>
    </tr>
    <tr>
      <th>3</th>
      <td>23</td>
      <td>Joe Biden</td>
      <td>40.785714</td>
    </tr>
    <tr>
      <th>4</th>
      <td>24</td>
      <td>Joe Biden</td>
      <td>51.640000</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>255</th>
      <td>80</td>
      <td>Bernie Sanders</td>
      <td>35.611111</td>
    </tr>
    <tr>
      <th>256</th>
      <td>81</td>
      <td>Bernie Sanders</td>
      <td>27.157895</td>
    </tr>
    <tr>
      <th>257</th>
      <td>82</td>
      <td>Bernie Sanders</td>
      <td>39.133333</td>
    </tr>
    <tr>
      <th>258</th>
      <td>83</td>
      <td>Bernie Sanders</td>
      <td>18.461538</td>
    </tr>
    <tr>
      <th>259</th>
      <td>84</td>
      <td>Bernie Sanders</td>
      <td>21.357143</td>
    </tr>
  </tbody>
</table>
<p>260 rows × 3 columns</p>
</div></div></div>
</div>
<p>To overlay multiple lines using the same axes, we set <code class="docutils literal notranslate"><span class="pre">age</span></code> as the x-axis, <code class="docutils literal notranslate"><span class="pre">thermometer</span></code> as the y-axis, and set the two lines to be different colors with <code class="docutils literal notranslate"><span class="pre">hue='candidate'</span></code>. <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> generates a legend by default. To show only the lines for Biden and Trump, we filter the data to only those that represent these two candidates:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;thermometer&#39;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;candidate&#39;</span><span class="p">,</span>
             <span class="n">data</span><span class="o">=</span><span class="n">anes_line</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;candidate==&#39;Donald Trump&#39; | candidate==&#39;Joe Biden&#39;&quot;</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Age of voters&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Feeling Thermometer Ratings By Age Group&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(0.0, 100.0)
</pre></div>
</div>
<img alt="_images/d474f941b6fe2d7c4de5ed1e2eff52bc832056b288e896b9f5b65eec26b768ba.png" src="_images/d474f941b6fe2d7c4de5ed1e2eff52bc832056b288e896b9f5b65eec26b768ba.png" />
</div>
</div>
<p>This graph indicates that Biden is more popular than Trump among younger voters and Trump is more popular than Biden among older voters.</p>
<p>We can use different line types as well as different colors for the candidates by including <code class="docutils literal notranslate"><span class="pre">style='candidate'</span></code> in the <code class="docutils literal notranslate"><span class="pre">sns.lineplot()</span></code> function. The following figure uses a solid, blue line for Biden and a dashed, orange line for Trump:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;thermometer&#39;</span><span class="p">,</span> 
             <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;candidate&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;candidate&#39;</span><span class="p">,</span>
             <span class="n">data</span><span class="o">=</span><span class="n">anes_line</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;candidate==&#39;Donald Trump&#39; | candidate==&#39;Joe Biden&#39;&quot;</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Age of voters&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Feeling Thermometer Ratings By Age Group&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(0.0, 100.0)
</pre></div>
</div>
<img alt="_images/391848fe0a55343bcbc494ba60496a92477fcd1ba23f43f7fe2513515674e71e.png" src="_images/391848fe0a55343bcbc494ba60496a92477fcd1ba23f43f7fe2513515674e71e.png" />
</div>
</div>
<p>To include four lines with four different colors and line types, we use the same code without subsetting the data:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;thermometer&#39;</span><span class="p">,</span> 
             <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;candidate&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;candidate&#39;</span><span class="p">,</span>
             <span class="n">data</span><span class="o">=</span><span class="n">anes_line</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Age of voters&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Feeling Thermometer Ratings By Age Group&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(0.0, 100.0)
</pre></div>
</div>
<img alt="_images/315e63547b625bea256c41138be0d996f81bd5b9ddad4cf2b3c366dafc687fa8.png" src="_images/315e63547b625bea256c41138be0d996f81bd5b9ddad4cf2b3c366dafc687fa8.png" />
</div>
</div>
<p>Four lines on one graph can be confusing, however. We can convey this information more clearly by using <code class="docutils literal notranslate"><span class="pre">sns.FacetGrid()</span></code> with <code class="docutils literal notranslate"><span class="pre">col</span> <span class="pre">=</span> <span class="pre">'candidate'</span></code> to create different graphs for each politician, and <code class="docutils literal notranslate"><span class="pre">col_wrap=2</span></code> to align these graphs in a 2x2 grid. To color-code the lines, write <code class="docutils literal notranslate"><span class="pre">hue='candidate'</span></code> in the <code class="docutils literal notranslate"><span class="pre">sns.FacetGrid()</span></code> function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">FacetGrid</span><span class="p">(</span><span class="n">anes_line</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;candidate&#39;</span><span class="p">,</span> 
                  <span class="n">col_wrap</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                 <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;candidate&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;thermometer&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">set_titles</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{col_name}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">set_axis_labels</span><span class="p">(</span><span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="s1">&#39;Thermometer rating&#39;</span><span class="p">)</span> 
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">.9</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Feeling Thermometer Ratings By Age&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 0.98, &#39;Feeling Thermometer Ratings By Age&#39;)
</pre></div>
</div>
<img alt="_images/d20cfac14bfda9b635b7783477b5dd334241e0ac2952ead258cb06d9f1f1a90e.png" src="_images/d20cfac14bfda9b635b7783477b5dd334241e0ac2952ead258cb06d9f1f1a90e.png" />
</div>
</div>
</section>
<section id="distributional-graphs">
<h3><a class="toc-backref" href="#id21" role="doc-backlink"><span class="section-number">11.2.4. </span>Distributional Graphs</a><a class="headerlink" href="#distributional-graphs" title="Link to this heading">#</a></h3>
<p>Distributional plots include <strong>histograms, density plots, violin plots, and box plots</strong>. Each of these kinds of graphs show the overall distribution of a continuous feature, not just a measure of location like the mean or median. In other words, distributions show the entirety of a feature while descriptive statistics only show a small amount of information about a feature. Suppose we have two candidates that individuals are asked to rate on a scale from 0 to 100. If half the individuals rate the first candidate 0, and half the individuals rate the first candidate 100, then this candidate’s average rating is 50. If all the individuals rate the second candidate 50, then this candidate’s average rating is also 50. Although the means are equal, the distributions are very different, and it would be a mistake to draw conclusions about these two candidates without taking into consideration the whole distribution of each candidates’ ratings.</p>
<section id="histograms">
<h4><a class="toc-backref" href="#id22" role="doc-backlink"><span class="section-number">11.2.4.1. </span>Histograms</a><a class="headerlink" href="#histograms" title="Link to this heading">#</a></h4>
<p>Histograms are similar to barplots, except that the bars are generally drawn without spaces in between. Histograms first use a function like <code class="docutils literal notranslate"><span class="pre">pd.cut()</span></code> to place the continuous values into bins, then it calculates the frequency of each bin. The number of bins defines the number of bars in a histogram, and the frequencies provide the height of each bar.</p>
<p>Histograms in <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> are generated with the <code class="docutils literal notranslate"><span class="pre">sns.distplot()</span></code> function. Unlike other <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> functions, where we had to specify an x and y feature, here we pass only the feature whose distribution we are trying to visualize. By default, <code class="docutils literal notranslate"><span class="pre">sns.distplot()</span></code> will draw a curve on top of the histogram showing the estimated density function, but it tends to clutter the figure, so we can turn it off with <code class="docutils literal notranslate"><span class="pre">kde=False</span></code>. Here is the histogram of the Biden thermometer ratings:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">ftbiden</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of Joe Biden Thermometer Ratings&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Distribution of Joe Biden Thermometer Ratings&#39;)
</pre></div>
</div>
<img alt="_images/d714f2e27bddc70f50f18884ec65ed9855fba66adc2b727164b3ab19b97581be.png" src="_images/d714f2e27bddc70f50f18884ec65ed9855fba66adc2b727164b3ab19b97581be.png" />
</div>
</div>
<p>We can change the color of the bars with the <code class="docutils literal notranslate"><span class="pre">color</span></code> argument, and we can turn off the default transparency of the color with <code class="docutils literal notranslate"><span class="pre">hist_kws=dict(alpha=1)</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">ftbiden</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">hist_kws</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of Joe Biden Thermometer Ratings&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Distribution of Joe Biden Thermometer Ratings&#39;)
</pre></div>
</div>
<img alt="_images/83a7b178fdbbfe091c567997d885e9ababcd1b28e55536eb792491f028a9e117.png" src="_images/83a7b178fdbbfe091c567997d885e9ababcd1b28e55536eb792491f028a9e117.png" />
</div>
</div>
<p>We can generate a histogram turned 90 degrees with <code class="docutils literal notranslate"><span class="pre">vertical=True</span></code>. Be sure to switch the labels for the x and y axes:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">ftbiden</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">hist_kws</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
            <span class="n">vertical</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of Joe Biden Thermometer Ratings&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Distribution of Joe Biden Thermometer Ratings&#39;)
</pre></div>
</div>
<img alt="_images/8c74e7432a18ff6d38db000fac5c76fd5d1a434c53411a6ec4c161e8d564a248.png" src="_images/8c74e7432a18ff6d38db000fac5c76fd5d1a434c53411a6ec4c161e8d564a248.png" />
</div>
</div>
<p>A key decision with histograms is the number of bins: because the feature is continuous, we must first place the values into equally spaced ranges that divide the total range of the feature, then we count the number of values in each range, and we set the heights of the bars equal to these frequencies. By default, <code class="docutils literal notranslate"><span class="pre">sns.distplot()</span></code> uses the number of bins that is recommended by the <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.histogram_bin_edges.html#numpy.histogram_bin_edges"><code class="docutils literal notranslate"><span class="pre">numpy.histogram_bin_edges()</span></code></a> function. This function calculates the number of bins to use with the <a class="reference external" href="https://en.wikipedia.org/wiki/Freedman%E2%80%93Diaconis_rule">Freedman-Diaconis rule</a> and with <a class="reference external" href="https://en.wikipedia.org/wiki/Histogram#Number_of_bins_and_width">Sturges’ Formula</a> and take the higher of these two numbers. We can change this default with the <code class="docutils literal notranslate"><span class="pre">bins</span></code> argument.</p>
<p>If we set the number of bins too low, we won’t accurately show the shape of the feature’s distribution, as in the following graph:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">ftbiden</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of Joe Biden Thermometer Ratings&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Distribution of Joe Biden Thermometer Ratings&#39;)
</pre></div>
</div>
<img alt="_images/14fff53ef52f71e3e8afae2d860ad04d36b150eabb0ba8ed8feb2bb22b92b8f4.png" src="_images/14fff53ef52f71e3e8afae2d860ad04d36b150eabb0ba8ed8feb2bb22b92b8f4.png" />
</div>
</div>
<p>But if we set the number of bins too high, we won’t have enough observations to get good estimates of the frequencies, leaving us with a figure like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">ftbiden</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> 
             <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">hist_kws</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of Joe Biden Thermometer Ratings&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Distribution of Joe Biden Thermometer Ratings&#39;)
</pre></div>
</div>
<img alt="_images/e12ca99e45e2f7cb319cb94b78e480405065ca1fb0a11a3e66659e63596fe0c8.png" src="_images/e12ca99e45e2f7cb319cb94b78e480405065ca1fb0a11a3e66659e63596fe0c8.png" />
</div>
</div>
<p>To show multiple features’ distributions in one figure, we can overlay two histograms with two calls to <code class="docutils literal notranslate"><span class="pre">sns.distplot()</span></code>, one for each feature. The two histograms will appear in the same figure but with different colors. The default transparency of the colors allows us to see three shades, one for each of the features and one for where the features overlap. It is important to include a legend to tell which color refers to which feature. For a legend, include the <code class="docutils literal notranslate"><span class="pre">label</span></code> argument in each call to <code class="docutils literal notranslate"><span class="pre">sns.displot()</span></code>: these labels define the text that will appear in the legend. Then use the <code class="docutils literal notranslate"><span class="pre">plt.legend()</span></code> function along with the other attributes. A figure that plots the Trump and Biden histograms together is:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">ftbiden</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Biden&#39;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">fttrump</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Trump&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of Thermometer Ratings&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.legend.Legend at 0x1a25fe8d50&gt;
</pre></div>
</div>
<img alt="_images/ea14b826b275816b1f3290bd23c62580c85978b889f41fe1ff81bd5a01ea2e97.png" src="_images/ea14b826b275816b1f3290bd23c62580c85978b889f41fe1ff81bd5a01ea2e97.png" />
</div>
</div>
<p>The conclusion we can draw here is that more people have extreme opinions of Trump, with ratings of 0 or 100, and more people have mediocre options of Biden.</p>
<p>To show various histograms in a facet grid, we have to use <code class="docutils literal notranslate"><span class="pre">pd.melt()</span></code> to reshape the data with the features we want to plot in long format:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anes_hist</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">anes</span><span class="p">,</span> <span class="n">id_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;caseid&#39;</span><span class="p">],</span> 
                    <span class="n">value_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="s1">&#39;fttrump&#39;</span><span class="p">,</span>
                                 <span class="s1">&#39;ftobama&#39;</span><span class="p">,</span> <span class="s1">&#39;ftsanders&#39;</span><span class="p">])</span>
<span class="n">anes_hist</span> <span class="o">=</span> <span class="n">anes_hist</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s1">&#39;variable&#39;</span><span class="p">:</span><span class="s1">&#39;candidate&#39;</span><span class="p">,</span>
                             <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="s1">&#39;thermometer&#39;</span><span class="p">},</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">anes_hist</span><span class="p">[</span><span class="s1">&#39;candidate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">anes_hist</span><span class="p">[</span><span class="s1">&#39;candidate&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s1">&#39;ftbiden&#39;</span><span class="p">:</span><span class="s1">&#39;Joe Biden&#39;</span><span class="p">,</span>
                                                     <span class="s1">&#39;fttrump&#39;</span><span class="p">:</span><span class="s1">&#39;Donald Trump&#39;</span><span class="p">,</span>
                                                     <span class="s1">&#39;ftobama&#39;</span><span class="p">:</span><span class="s1">&#39;Barack Obama&#39;</span><span class="p">,</span>
                                                     <span class="s1">&#39;ftsanders&#39;</span><span class="p">:</span><span class="s1">&#39;Bernie Sanders&#39;</span><span class="p">})</span>
<span class="n">anes_hist</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>caseid</th>
      <th>candidate</th>
      <th>thermometer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>Joe Biden</td>
      <td>52.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>Joe Biden</td>
      <td>41.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>Joe Biden</td>
      <td>88.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>Joe Biden</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>Joe Biden</td>
      <td>25.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>12655</th>
      <td>3161</td>
      <td>Bernie Sanders</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>12656</th>
      <td>3162</td>
      <td>Bernie Sanders</td>
      <td>92.0</td>
    </tr>
    <tr>
      <th>12657</th>
      <td>3163</td>
      <td>Bernie Sanders</td>
      <td>59.0</td>
    </tr>
    <tr>
      <th>12658</th>
      <td>3164</td>
      <td>Bernie Sanders</td>
      <td>79.0</td>
    </tr>
    <tr>
      <th>12659</th>
      <td>3165</td>
      <td>Bernie Sanders</td>
      <td>100.0</td>
    </tr>
  </tbody>
</table>
<p>12660 rows × 3 columns</p>
</div></div></div>
</div>
<p>We can now use the <code class="docutils literal notranslate"><span class="pre">sns.FacetGrid()</span></code> function the way we did for line plots:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">FacetGrid</span><span class="p">(</span><span class="n">anes_hist</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;candidate&#39;</span><span class="p">,</span> 
                  <span class="n">col_wrap</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                 <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;candidate&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">,</span> <span class="s1">&#39;thermometer&#39;</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">set_titles</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{col_name}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">set_axis_labels</span><span class="p">(</span><span class="s1">&#39;Thermometer rating&#39;</span><span class="p">,</span> <span class="s1">&#39;Frequency&#39;</span><span class="p">)</span> 
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">.9</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Feeling Thermometer Distributions&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 0.98, &#39;Feeling Thermometer Distributions&#39;)
</pre></div>
</div>
<img alt="_images/e431bd7a5d8ed3f87aeff7c588934ccdebfb5281f105c1a8a1a7b8d26e3edc6c.png" src="_images/e431bd7a5d8ed3f87aeff7c588934ccdebfb5281f105c1a8a1a7b8d26e3edc6c.png" />
</div>
</div>
</section>
<section id="density-plots">
<h4><a class="toc-backref" href="#id23" role="doc-backlink"><span class="section-number">11.2.4.2. </span>Density Plots</a><a class="headerlink" href="#density-plots" title="Link to this heading">#</a></h4>
<p>Density plots, or kernel density plots, are derived from histograms. Given a histogram, it is possible to draw a continuous curve that follows the heights of the bars. This curve is an estimate of the probability density function of a continous feature, and the higher the curve in a range, the more frequently we observe values in the range.</p>
<p>One way to see the density curve is to use the <code class="docutils literal notranslate"><span class="pre">sns.distplot()</span></code> function with the <code class="docutils literal notranslate"><span class="pre">kde</span></code> argument set to <code class="docutils literal notranslate"><span class="pre">True</span></code> and the <code class="docutils literal notranslate"><span class="pre">hist</span></code> argument set to <code class="docutils literal notranslate"><span class="pre">False</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">ftbiden</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">hist</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Density&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of Joe Biden Thermometer Ratings&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Distribution of Joe Biden Thermometer Ratings&#39;)
</pre></div>
</div>
<img alt="_images/198a4f42a4eae6e2bcdb77dd2ce65cda37bdbcbc7fd214a2f2b455f545e60a8b.png" src="_images/198a4f42a4eae6e2bcdb77dd2ce65cda37bdbcbc7fd214a2f2b455f545e60a8b.png" />
</div>
</div>
<p>A nicer-looking version of this plot comes from the <code class="docutils literal notranslate"><span class="pre">sns.kdeplot()</span></code> function, which allows shading underneath the curve with <code class="docutils literal notranslate"><span class="pre">shade=True</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">ftbiden</span><span class="p">,</span> <span class="n">shade</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Density&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of Joe Biden Thermometer Ratings&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Distribution of Joe Biden Thermometer Ratings&#39;)
</pre></div>
</div>
<img alt="_images/fc275135ebc82750a96c0db9f4bf1c7e49d545a14395faf0dbcd006a5508040a.png" src="_images/fc275135ebc82750a96c0db9f4bf1c7e49d545a14395faf0dbcd006a5508040a.png" />
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">sns.kdeplot()</span></code> function includes a legend by default, which makes it much easier to plot multiple densities on top of one another. Here is the density plot for for Biden and Trump:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">ftbiden</span><span class="p">,</span> <span class="n">shade</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Biden&#39;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">fttrump</span><span class="p">,</span> <span class="n">shade</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Trump&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Thermometer rating&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of Thermometer Ratings&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.legend.Legend at 0x1a276c0910&gt;
</pre></div>
</div>
<img alt="_images/03ba2c8a2029a1af406b0c1779e70ced34a32170880e3a572b9b1718c1b5bf2f.png" src="_images/03ba2c8a2029a1af406b0c1779e70ced34a32170880e3a572b9b1718c1b5bf2f.png" />
</div>
</div>
<p>I do not recommend including more than two features on a density plot as it will be difficult to tell the difference between more than two shaded areas. However, a facet grid is an effective alternative:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">FacetGrid</span><span class="p">(</span><span class="n">anes_hist</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;candidate&#39;</span><span class="p">,</span> 
                  <span class="n">col_wrap</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                 <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;candidate&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">,</span> <span class="s1">&#39;thermometer&#39;</span><span class="p">,</span> <span class="n">shade</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">set_titles</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{col_name}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">set_axis_labels</span><span class="p">(</span><span class="s1">&#39;Thermometer rating&#39;</span><span class="p">,</span> <span class="s1">&#39;Density&#39;</span><span class="p">)</span> 
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">.9</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Feeling Thermometer Distributions&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 0.98, &#39;Feeling Thermometer Distributions&#39;)
</pre></div>
</div>
<img alt="_images/559032fa4c13563f4c5ad0b46fefe0daff3816825cf504c7b1322467733a5c19.png" src="_images/559032fa4c13563f4c5ad0b46fefe0daff3816825cf504c7b1322467733a5c19.png" />
</div>
</div>
<p>Density plots are effective ways to estimate and illustrate a single feature’s distribution. But a pair of features together have a joint distribution. A joint distribution of two features is a three-dimensional graph, which is trickier to visualize. The higher the joint distribution, the more those ordered pairs of the two features will appear in the data. One way to visualize a joint distribution is to use a level plot, which looks at a joint distribution from a vantage point directly above the curve. The level plot uses shading to represent points that have the same height, and the darkest areas are the peaks of the curves. These areas are the most frequent combinations of the two features.</p>
<p>Another way to visualize a joint distribution is with a hex plot, which divides the region into hexagons and shades the region according to how many combinations of the two values of the features fall into that region.</p>
<p>A joint plot combines a scatterplot, level plot, or hexplot with histograms or density plots to illustrate the two-way relationship between two features as well as the distributions of each individual feature. The distribution for the feature on the x-axis of the scatterplot is listed on the top, opposite the x-axis, and the distribution for the feature on the y-axis is listed on the right, opposite the y-axis. To generate a joint plot, use the <code class="docutils literal notranslate"><span class="pre">sns.jointplot()</span></code> function with <code class="docutils literal notranslate"><span class="pre">kind='scatter'</span></code> to display a scatterplot and histograms:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">jointplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;fttrump&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">anes</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;scatter&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;seaborn.axisgrid.JointGrid at 0x1a27211810&gt;
</pre></div>
</div>
<img alt="_images/ffe07ffb7397e8be89fa08a7da3aa21e89e9349a95d6bf25096da743190ac848.png" src="_images/ffe07ffb7397e8be89fa08a7da3aa21e89e9349a95d6bf25096da743190ac848.png" />
</div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">kind='kde'</span></code> to display a level plot and densities:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">jointplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;fttrump&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">anes</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;kde&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;seaborn.axisgrid.JointGrid at 0x1a29244850&gt;
</pre></div>
</div>
<img alt="_images/55c0752a2418782fafc5c8aa4fbda20c9158cc5a28c9decad5a5733802a56f80.png" src="_images/55c0752a2418782fafc5c8aa4fbda20c9158cc5a28c9decad5a5733802a56f80.png" />
</div>
</div>
<p>And use <code class="docutils literal notranslate"><span class="pre">kind='hex'</span></code> to display a hex plot and histograms:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">jointplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;fttrump&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">anes</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;hex&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;seaborn.axisgrid.JointGrid at 0x1a2a54b3d0&gt;
</pre></div>
</div>
<img alt="_images/2d8eff52e1fd2efbe985c49ee655e189f5bd5ab031a62da3e7b5453d897486fe.png" src="_images/2d8eff52e1fd2efbe985c49ee655e189f5bd5ab031a62da3e7b5453d897486fe.png" />
</div>
</div>
<p>These plots, especially with the level plot and hex plot, show more observations clustered around 100 for Trump and 0 for Biden, and around 0 for Trump and values greater than 50 for Biden.</p>
</section>
<section id="violin-plots">
<h4><a class="toc-backref" href="#id24" role="doc-backlink"><span class="section-number">11.2.4.3. </span>Violin Plots</a><a class="headerlink" href="#violin-plots" title="Link to this heading">#</a></h4>
<p>A violin plot has two aesthetic components. First, each violin plot has a line with three parts: the longest, thinnest line represents the range of the feature, the thicker line represents the interquartile range (the 25th percentile through the 75th percentile), and a dot in the middle of the thick line represents the median. Second, these plots show the density plot on both sides of the line. Violin plots are symmetric and often end up looking like violins, hence the name.</p>
<p>To generate a violin plot, use the <code class="docutils literal notranslate"><span class="pre">sns.violinplot()</span></code> function. To illustrate the distribution of one feature, pass that feature to the function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">violinplot</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">ftbiden</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Density&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Feeling Thermometer Ratings&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distributions of Ratings for Joe Biden&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Distributions of Ratings for Joe Biden&#39;)
</pre></div>
</div>
<img alt="_images/f95315b57c034899fdad81fd900a023ccb8433d109f4fd12dea60b3ed51808c6.png" src="_images/f95315b57c034899fdad81fd900a023ccb8433d109f4fd12dea60b3ed51808c6.png" />
</div>
</div>
<p>Violin plots are very useful for showing different violins for different features side-by-side. If the data are in a long format, as with <code class="docutils literal notranslate"><span class="pre">anes_hist</span></code>,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anes_hist</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>caseid</th>
      <th>candidate</th>
      <th>thermometer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>Joe Biden</td>
      <td>52.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>Joe Biden</td>
      <td>41.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>Joe Biden</td>
      <td>88.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>Joe Biden</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>Joe Biden</td>
      <td>25.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>12655</th>
      <td>3161</td>
      <td>Bernie Sanders</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>12656</th>
      <td>3162</td>
      <td>Bernie Sanders</td>
      <td>92.0</td>
    </tr>
    <tr>
      <th>12657</th>
      <td>3163</td>
      <td>Bernie Sanders</td>
      <td>59.0</td>
    </tr>
    <tr>
      <th>12658</th>
      <td>3164</td>
      <td>Bernie Sanders</td>
      <td>79.0</td>
    </tr>
    <tr>
      <th>12659</th>
      <td>3165</td>
      <td>Bernie Sanders</td>
      <td>100.0</td>
    </tr>
  </tbody>
</table>
<p>12660 rows × 3 columns</p>
</div></div></div>
</div>
<p>then pass the category label to <code class="docutils literal notranslate"><span class="pre">x</span></code> and the values to <code class="docutils literal notranslate"><span class="pre">y</span></code> to display side-by-side violins. For example, here are the violins for the four political figures:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">violinplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;candidate&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;thermometer&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">anes_hist</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Political Figure&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Feeling Thermometer Ratings&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distributions of Ratings for Political Figures&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Distributions of Ratings for Political Figures&#39;)
</pre></div>
</div>
<img alt="_images/9c2824c88c0ffbb184b7e3b7bc74c22c4a8ae3a858087474ad7ded9a084bc1fe.png" src="_images/9c2824c88c0ffbb184b7e3b7bc74c22c4a8ae3a858087474ad7ded9a084bc1fe.png" />
</div>
</div>
<p>If there is more than one categorical grouping feature, then we can use an aesthetic like <code class="docutils literal notranslate"><span class="pre">hue</span></code> to represent that feature. In this example, I reshape the <code class="docutils literal notranslate"><span class="pre">anes</span></code> to long format including <code class="docutils literal notranslate"><span class="pre">sex</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anes_vio</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">anes</span><span class="p">,</span> <span class="n">id_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;caseid&#39;</span><span class="p">,</span> <span class="s1">&#39;sex&#39;</span><span class="p">],</span> 
                    <span class="n">value_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ftbiden&#39;</span><span class="p">,</span> <span class="s1">&#39;fttrump&#39;</span><span class="p">,</span>
                                 <span class="s1">&#39;ftobama&#39;</span><span class="p">,</span> <span class="s1">&#39;ftsanders&#39;</span><span class="p">])</span>
<span class="n">anes_vio</span> <span class="o">=</span> <span class="n">anes_vio</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s1">&#39;variable&#39;</span><span class="p">:</span><span class="s1">&#39;candidate&#39;</span><span class="p">,</span>
                             <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="s1">&#39;thermometer&#39;</span><span class="p">},</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">anes_vio</span><span class="p">[</span><span class="s1">&#39;candidate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">anes_vio</span><span class="p">[</span><span class="s1">&#39;candidate&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s1">&#39;ftbiden&#39;</span><span class="p">:</span><span class="s1">&#39;Joe Biden&#39;</span><span class="p">,</span>
                                                    <span class="s1">&#39;fttrump&#39;</span><span class="p">:</span><span class="s1">&#39;Donald Trump&#39;</span><span class="p">,</span>
                                                    <span class="s1">&#39;ftobama&#39;</span><span class="p">:</span><span class="s1">&#39;Barack Obama&#39;</span><span class="p">,</span>
                                                    <span class="s1">&#39;ftsanders&#39;</span><span class="p">:</span><span class="s1">&#39;Bernie Sanders&#39;</span><span class="p">})</span>
<span class="n">anes_vio</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>caseid</th>
      <th>sex</th>
      <th>candidate</th>
      <th>thermometer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>Male</td>
      <td>Joe Biden</td>
      <td>52.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>Male</td>
      <td>Joe Biden</td>
      <td>41.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>Female</td>
      <td>Joe Biden</td>
      <td>88.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>Male</td>
      <td>Joe Biden</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>Female</td>
      <td>Joe Biden</td>
      <td>25.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>12655</th>
      <td>3161</td>
      <td>Male</td>
      <td>Bernie Sanders</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>12656</th>
      <td>3162</td>
      <td>Male</td>
      <td>Bernie Sanders</td>
      <td>92.0</td>
    </tr>
    <tr>
      <th>12657</th>
      <td>3163</td>
      <td>Male</td>
      <td>Bernie Sanders</td>
      <td>59.0</td>
    </tr>
    <tr>
      <th>12658</th>
      <td>3164</td>
      <td>Male</td>
      <td>Bernie Sanders</td>
      <td>79.0</td>
    </tr>
    <tr>
      <th>12659</th>
      <td>3165</td>
      <td>Male</td>
      <td>Bernie Sanders</td>
      <td>100.0</td>
    </tr>
  </tbody>
</table>
<p>12660 rows × 4 columns</p>
</div></div></div>
</div>
<p>I can then specify <code class="docutils literal notranslate"><span class="pre">hue='sex'</span></code> to generate two violin plots, one for men and one for women, side-by-side within each column devoted to each political figure:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">violinplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;candidate&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;thermometer&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">anes_vio</span><span class="p">,</span>
              <span class="n">hue</span> <span class="o">=</span> <span class="s1">&#39;sex&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Political Figure&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Feeling Thermometer Ratings&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distributions of Ratings for Political Figures&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Distributions of Ratings for Political Figures&#39;)
</pre></div>
</div>
<img alt="_images/1bcda87e419aa236deb7f12745b9ee6ab14d73e881f661dffb59221b5197e1f3.png" src="_images/1bcda87e419aa236deb7f12745b9ee6ab14d73e881f661dffb59221b5197e1f3.png" />
</div>
</div>
</section>
<section id="boxplots">
<h4><a class="toc-backref" href="#id25" role="doc-backlink"><span class="section-number">11.2.4.4. </span>Boxplots</a><a class="headerlink" href="#boxplots" title="Link to this heading">#</a></h4>
<p>Instead of illustrating the entire distribution of a feature, box plots only show some descriptive statistics: the median, 25th and 75th percentiles, the minimum and maximum after removing outliers, and dots for the outliers. To generate a box plot with <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>, use the <code class="docutils literal notranslate"><span class="pre">sns.boxplot()</span></code> function, passing the feature we want to visualize:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">ftbiden</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Feeling Thermometer Ratings&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distributions of Ratings for Joe Biden&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Distributions of Ratings for Joe Biden&#39;)
</pre></div>
</div>
<img alt="_images/e2e76d10327dcfb0d4e4322fd717c7970967ef21d8d539b2a1af6e4ca0fb9056.png" src="_images/e2e76d10327dcfb0d4e4322fd717c7970967ef21d8d539b2a1af6e4ca0fb9056.png" />
</div>
</div>
<p>Box plots can be confusing because the aesthetic components that map to descriptive statistics are not as intuitive as bars or density curves. There is no meaning to the width of the box, and the lines and edges in a box plot have specific definitions that are necessary to remember in order to interpret a box plot correctly. The middle line represents the median, and the edges of the box are the 25th and 75th percentile. The whiskers that extend from the short side of the box extend to the minimum and maximum values, after removing outliers. An outlier is defined by default as a value that is 1.5 times the interquartile range, either below the 25th percentile or above the 75th percentile, and outliers are illustrated with dots beyond the minimum and maximum values. Here is the same boxplot as the one above with these elements annotated:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">ftbiden</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Feeling Thermometer Ratings&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distributions of Ratings for Joe Biden&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">ftbiden</span><span class="o">.</span><span class="n">median</span><span class="p">(),</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;median&#39;</span><span class="p">,</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
        <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">ftbiden</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="o">-</span><span class="mf">.05</span><span class="p">,</span> <span class="s1">&#39;maximum&#39;</span><span class="p">,</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
        <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">ftbiden</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="o">-</span><span class="mf">.05</span><span class="p">,</span> <span class="s1">&#39;minimum&#39;</span><span class="p">,</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
        <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">ftbiden</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;here there be outliers&#39;</span><span class="p">,</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
        <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">ftbiden</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;here there be outliers&#39;</span><span class="p">,</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
        <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">ftbiden</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">.25</span><span class="p">),</span> <span class="mf">.25</span><span class="p">,</span> <span class="s1">&#39;25th percentile&#39;</span><span class="p">,</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
        <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">anes</span><span class="o">.</span><span class="n">ftbiden</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">.75</span><span class="p">),</span> <span class="mf">.25</span><span class="p">,</span> <span class="s1">&#39;75th percentile&#39;</span><span class="p">,</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
        <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(70.0, 0.25, &#39;75th percentile&#39;)
</pre></div>
</div>
<img alt="_images/ca5f64f609f77736a253cb293d504620383575d72a2a47207faad0496ad40870.png" src="_images/ca5f64f609f77736a253cb293d504620383575d72a2a47207faad0496ad40870.png" />
</div>
</div>
<p>In short, to read a box plot accurately, there’s a lot to remember. Many statisticians and data scientists prefer violin plots to box plots because violin plots are more intuitive, which makes them easier to use for communicating with a general audience. On the other hand, box plots make it easier to see the interquartile range of a feature.</p>
<p>To show multiple features in the same box plot, arrange the data in long-format, such as:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anes_hist</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>caseid</th>
      <th>candidate</th>
      <th>thermometer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>Joe Biden</td>
      <td>52.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>Joe Biden</td>
      <td>41.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>Joe Biden</td>
      <td>88.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>Joe Biden</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>Joe Biden</td>
      <td>25.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>12655</th>
      <td>3161</td>
      <td>Bernie Sanders</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>12656</th>
      <td>3162</td>
      <td>Bernie Sanders</td>
      <td>92.0</td>
    </tr>
    <tr>
      <th>12657</th>
      <td>3163</td>
      <td>Bernie Sanders</td>
      <td>59.0</td>
    </tr>
    <tr>
      <th>12658</th>
      <td>3164</td>
      <td>Bernie Sanders</td>
      <td>79.0</td>
    </tr>
    <tr>
      <th>12659</th>
      <td>3165</td>
      <td>Bernie Sanders</td>
      <td>100.0</td>
    </tr>
  </tbody>
</table>
<p>12660 rows × 3 columns</p>
</div></div></div>
</div>
<p>The syntax to show the side-by-side box plots is as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;candidate&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;thermometer&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">anes_hist</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Political Figure&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Feeling Thermometer Ratings&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distributions of Ratings for Political Figures&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Distributions of Ratings for Political Figures&#39;)
</pre></div>
</div>
<img alt="_images/a2218f525cf02ce0185a9a91d72316dd5b44e34e7ca8c8ec3bb61c9b16ed3b1f.png" src="_images/a2218f525cf02ce0185a9a91d72316dd5b44e34e7ca8c8ec3bb61c9b16ed3b1f.png" />
</div>
</div>
</section>
</section>
<section id="heatmaps">
<h3><a class="toc-backref" href="#id26" role="doc-backlink"><span class="section-number">11.2.5. </span>Heatmaps</a><a class="headerlink" href="#heatmaps" title="Link to this heading">#</a></h3>
<p>Heat maps are used to visualize a matrix in which all datapoints within the matrix are on comparable scales, such as a correlation matrix. Heat maps often use colors that range from black to white, moving through shades of blue and red, where black and blue indicate smaller values and red and white indicate larger values. The shading allows us to illustrate a range of values with a direct mapping to a specific shade.</p>
<p>First I generate a correlation matrix between many feeling thermometers:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_corr</span> <span class="o">=</span> <span class="n">anes</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;fttrump&#39;</span><span class="p">:</span><span class="s1">&#39;ftnra&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
<span class="n">my_corr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fttrump</th>
      <th>ftobama</th>
      <th>ftbiden</th>
      <th>ftwarren</th>
      <th>ftsanders</th>
      <th>ftbuttigieg</th>
      <th>ftharris</th>
      <th>ftblack</th>
      <th>ftwhite</th>
      <th>fthisp</th>
      <th>ftasian</th>
      <th>ftmuslim</th>
      <th>ftillegal</th>
      <th>ftjournal</th>
      <th>ftnato</th>
      <th>ftun</th>
      <th>ftice</th>
      <th>ftnra</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>fttrump</th>
      <td>1.000000</td>
      <td>-0.754178</td>
      <td>-0.646357</td>
      <td>-0.699664</td>
      <td>-0.678443</td>
      <td>-0.588964</td>
      <td>-0.616295</td>
      <td>-0.088143</td>
      <td>0.240802</td>
      <td>-0.128286</td>
      <td>-0.031700</td>
      <td>-0.458024</td>
      <td>-0.610016</td>
      <td>-0.643103</td>
      <td>-0.381275</td>
      <td>-0.576975</td>
      <td>0.712355</td>
      <td>0.769239</td>
    </tr>
    <tr>
      <th>ftobama</th>
      <td>-0.754178</td>
      <td>1.000000</td>
      <td>0.805100</td>
      <td>0.783064</td>
      <td>0.720092</td>
      <td>0.714641</td>
      <td>0.743463</td>
      <td>0.222713</td>
      <td>-0.096177</td>
      <td>0.223919</td>
      <td>0.123806</td>
      <td>0.550868</td>
      <td>0.644172</td>
      <td>0.703190</td>
      <td>0.503913</td>
      <td>0.670916</td>
      <td>-0.541225</td>
      <td>-0.620586</td>
    </tr>
    <tr>
      <th>ftbiden</th>
      <td>-0.646357</td>
      <td>0.805100</td>
      <td>1.000000</td>
      <td>0.733601</td>
      <td>0.664075</td>
      <td>0.728557</td>
      <td>0.730069</td>
      <td>0.171006</td>
      <td>-0.028490</td>
      <td>0.171773</td>
      <td>0.093182</td>
      <td>0.463104</td>
      <td>0.562951</td>
      <td>0.654196</td>
      <td>0.521605</td>
      <td>0.636527</td>
      <td>-0.411359</td>
      <td>-0.514269</td>
    </tr>
    <tr>
      <th>ftwarren</th>
      <td>-0.699664</td>
      <td>0.783064</td>
      <td>0.733601</td>
      <td>1.000000</td>
      <td>0.798636</td>
      <td>0.706680</td>
      <td>0.799202</td>
      <td>0.224285</td>
      <td>-0.086150</td>
      <td>0.241548</td>
      <td>0.151839</td>
      <td>0.534428</td>
      <td>0.675027</td>
      <td>0.718289</td>
      <td>0.509323</td>
      <td>0.684970</td>
      <td>-0.535019</td>
      <td>-0.578689</td>
    </tr>
    <tr>
      <th>ftsanders</th>
      <td>-0.678443</td>
      <td>0.720092</td>
      <td>0.664075</td>
      <td>0.798636</td>
      <td>1.000000</td>
      <td>0.612547</td>
      <td>0.695092</td>
      <td>0.178376</td>
      <td>-0.097548</td>
      <td>0.203581</td>
      <td>0.120267</td>
      <td>0.485082</td>
      <td>0.625150</td>
      <td>0.644384</td>
      <td>0.403909</td>
      <td>0.608613</td>
      <td>-0.534303</td>
      <td>-0.543851</td>
    </tr>
    <tr>
      <th>ftbuttigieg</th>
      <td>-0.588964</td>
      <td>0.714641</td>
      <td>0.728557</td>
      <td>0.706680</td>
      <td>0.612547</td>
      <td>1.000000</td>
      <td>0.736301</td>
      <td>0.161853</td>
      <td>-0.022885</td>
      <td>0.183849</td>
      <td>0.129914</td>
      <td>0.494359</td>
      <td>0.567295</td>
      <td>0.662666</td>
      <td>0.546362</td>
      <td>0.647596</td>
      <td>-0.398386</td>
      <td>-0.495196</td>
    </tr>
    <tr>
      <th>ftharris</th>
      <td>-0.616295</td>
      <td>0.743463</td>
      <td>0.730069</td>
      <td>0.799202</td>
      <td>0.695092</td>
      <td>0.736301</td>
      <td>1.000000</td>
      <td>0.215413</td>
      <td>-0.074303</td>
      <td>0.222411</td>
      <td>0.126617</td>
      <td>0.510411</td>
      <td>0.636316</td>
      <td>0.668522</td>
      <td>0.505836</td>
      <td>0.650612</td>
      <td>-0.452134</td>
      <td>-0.497697</td>
    </tr>
    <tr>
      <th>ftblack</th>
      <td>-0.088143</td>
      <td>0.222713</td>
      <td>0.171006</td>
      <td>0.224285</td>
      <td>0.178376</td>
      <td>0.161853</td>
      <td>0.215413</td>
      <td>1.000000</td>
      <td>0.434286</td>
      <td>0.723005</td>
      <td>0.655427</td>
      <td>0.504421</td>
      <td>0.358561</td>
      <td>0.283701</td>
      <td>0.256728</td>
      <td>0.233984</td>
      <td>0.030010</td>
      <td>-0.013278</td>
    </tr>
    <tr>
      <th>ftwhite</th>
      <td>0.240802</td>
      <td>-0.096177</td>
      <td>-0.028490</td>
      <td>-0.086150</td>
      <td>-0.097548</td>
      <td>-0.022885</td>
      <td>-0.074303</td>
      <td>0.434286</td>
      <td>1.000000</td>
      <td>0.416440</td>
      <td>0.528256</td>
      <td>0.144579</td>
      <td>-0.005061</td>
      <td>0.021498</td>
      <td>0.133711</td>
      <td>0.036300</td>
      <td>0.331804</td>
      <td>0.284510</td>
    </tr>
    <tr>
      <th>fthisp</th>
      <td>-0.128286</td>
      <td>0.223919</td>
      <td>0.171773</td>
      <td>0.241548</td>
      <td>0.203581</td>
      <td>0.183849</td>
      <td>0.222411</td>
      <td>0.723005</td>
      <td>0.416440</td>
      <td>1.000000</td>
      <td>0.735956</td>
      <td>0.540324</td>
      <td>0.458139</td>
      <td>0.298506</td>
      <td>0.316018</td>
      <td>0.268326</td>
      <td>-0.024752</td>
      <td>-0.040818</td>
    </tr>
    <tr>
      <th>ftasian</th>
      <td>-0.031700</td>
      <td>0.123806</td>
      <td>0.093182</td>
      <td>0.151839</td>
      <td>0.120267</td>
      <td>0.129914</td>
      <td>0.126617</td>
      <td>0.655427</td>
      <td>0.528256</td>
      <td>0.735956</td>
      <td>1.000000</td>
      <td>0.479058</td>
      <td>0.319166</td>
      <td>0.220121</td>
      <td>0.300172</td>
      <td>0.207668</td>
      <td>0.097326</td>
      <td>0.029180</td>
    </tr>
    <tr>
      <th>ftmuslim</th>
      <td>-0.458024</td>
      <td>0.550868</td>
      <td>0.463104</td>
      <td>0.534428</td>
      <td>0.485082</td>
      <td>0.494359</td>
      <td>0.510411</td>
      <td>0.504421</td>
      <td>0.144579</td>
      <td>0.540324</td>
      <td>0.479058</td>
      <td>1.000000</td>
      <td>0.675827</td>
      <td>0.585710</td>
      <td>0.480992</td>
      <td>0.555999</td>
      <td>-0.312947</td>
      <td>-0.373475</td>
    </tr>
    <tr>
      <th>ftillegal</th>
      <td>-0.610016</td>
      <td>0.644172</td>
      <td>0.562951</td>
      <td>0.675027</td>
      <td>0.625150</td>
      <td>0.567295</td>
      <td>0.636316</td>
      <td>0.358561</td>
      <td>-0.005061</td>
      <td>0.458139</td>
      <td>0.319166</td>
      <td>0.675827</td>
      <td>1.000000</td>
      <td>0.680360</td>
      <td>0.462385</td>
      <td>0.599799</td>
      <td>-0.512262</td>
      <td>-0.495687</td>
    </tr>
    <tr>
      <th>ftjournal</th>
      <td>-0.643103</td>
      <td>0.703190</td>
      <td>0.654196</td>
      <td>0.718289</td>
      <td>0.644384</td>
      <td>0.662666</td>
      <td>0.668522</td>
      <td>0.283701</td>
      <td>0.021498</td>
      <td>0.298506</td>
      <td>0.220121</td>
      <td>0.585710</td>
      <td>0.680360</td>
      <td>1.000000</td>
      <td>0.599288</td>
      <td>0.742631</td>
      <td>-0.460893</td>
      <td>-0.530127</td>
    </tr>
    <tr>
      <th>ftnato</th>
      <td>-0.381275</td>
      <td>0.503913</td>
      <td>0.521605</td>
      <td>0.509323</td>
      <td>0.403909</td>
      <td>0.546362</td>
      <td>0.505836</td>
      <td>0.256728</td>
      <td>0.133711</td>
      <td>0.316018</td>
      <td>0.300172</td>
      <td>0.480992</td>
      <td>0.462385</td>
      <td>0.599288</td>
      <td>1.000000</td>
      <td>0.694893</td>
      <td>-0.159086</td>
      <td>-0.286711</td>
    </tr>
    <tr>
      <th>ftun</th>
      <td>-0.576975</td>
      <td>0.670916</td>
      <td>0.636527</td>
      <td>0.684970</td>
      <td>0.608613</td>
      <td>0.647596</td>
      <td>0.650612</td>
      <td>0.233984</td>
      <td>0.036300</td>
      <td>0.268326</td>
      <td>0.207668</td>
      <td>0.555999</td>
      <td>0.599799</td>
      <td>0.742631</td>
      <td>0.694893</td>
      <td>1.000000</td>
      <td>-0.392435</td>
      <td>-0.475780</td>
    </tr>
    <tr>
      <th>ftice</th>
      <td>0.712355</td>
      <td>-0.541225</td>
      <td>-0.411359</td>
      <td>-0.535019</td>
      <td>-0.534303</td>
      <td>-0.398386</td>
      <td>-0.452134</td>
      <td>0.030010</td>
      <td>0.331804</td>
      <td>-0.024752</td>
      <td>0.097326</td>
      <td>-0.312947</td>
      <td>-0.512262</td>
      <td>-0.460893</td>
      <td>-0.159086</td>
      <td>-0.392435</td>
      <td>1.000000</td>
      <td>0.727624</td>
    </tr>
    <tr>
      <th>ftnra</th>
      <td>0.769239</td>
      <td>-0.620586</td>
      <td>-0.514269</td>
      <td>-0.578689</td>
      <td>-0.543851</td>
      <td>-0.495196</td>
      <td>-0.497697</td>
      <td>-0.013278</td>
      <td>0.284510</td>
      <td>-0.040818</td>
      <td>0.029180</td>
      <td>-0.373475</td>
      <td>-0.495687</td>
      <td>-0.530127</td>
      <td>-0.286711</td>
      <td>-0.475780</td>
      <td>0.727624</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>To display a heatmap, we pass the correlation matrix to the <code class="docutils literal notranslate"><span class="pre">sns.heatmap()</span></code> function. The function labels the rows and columns automatically from the row and column indices of the correlation matrix and provides a color scale along the left side to help us interpret and understand the colors in the heatmap. The heatmap for the feeling thermometers is:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">my_corr</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Correlation Between Feeling Thermometers&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Correlation Between Feeling Thermometers&#39;)
</pre></div>
</div>
<img alt="_images/17280a32cfe0e807e484b45a60362a232b79d86a28f38ef7d7b19994fdf88ae2.png" src="_images/17280a32cfe0e807e484b45a60362a232b79d86a28f38ef7d7b19994fdf88ae2.png" />
</div>
</div>
<p>The color scale, by default, ranges from black to white. But we might want to change the colors to emphasize that zero is explicitly in the middle of the scale. For that we can specify <code class="docutils literal notranslate"><span class="pre">center=0</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">my_corr</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Correlation Between Feeling Thermometers&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Correlation Between Feeling Thermometers&#39;)
</pre></div>
</div>
<img alt="_images/c88786e67e83dee99d6c72bacbb000cfe327ee78043e6a6597041ab046c042f4.png" src="_images/c88786e67e83dee99d6c72bacbb000cfe327ee78043e6a6597041ab046c042f4.png" />
</div>
</div>
<p>The scale now ranges from light blue to light red, with black in the middle. There are many other options for color scales, listed on the <a class="reference external" href="https://seaborn.pydata.org/tutorial/color_palettes.html">Choosing Color Palettes</a> tutorial in the <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> user guide. We can specify a color scale that ranges from yellow, to green, to blue by specifying <code class="docutils literal notranslate"><span class="pre">cmap='YlGnBu'</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">my_corr</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;YlGnBu&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Correlation Between Feeling Thermometers&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Correlation Between Feeling Thermometers&#39;)
</pre></div>
</div>
<img alt="_images/95b6eef3dd17a9f760867fe0117fe2cbb811a4eb12c13a87f32f64cb494a970e.png" src="_images/95b6eef3dd17a9f760867fe0117fe2cbb811a4eb12c13a87f32f64cb494a970e.png" />
</div>
</div>
<p>Finally, we can annotate the heatmap with the values that each color in each cell represents by typing <code class="docutils literal notranslate"><span class="pre">annot=True</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">my_corr</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Correlation Between Feeling Thermometers&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Correlation Between Feeling Thermometers&#39;)
</pre></div>
</div>
<img alt="_images/dacba0c09ae9e5afe8b8c486028816e1cd65cc3731f9c93deaab587b552b81dd.png" src="_images/dacba0c09ae9e5afe8b8c486028816e1cd65cc3731f9c93deaab587b552b81dd.png" />
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="ch10.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">10. </span>Exploratory Data Analysis</p>
      </div>
    </a>
    <a class="right-next"
       href="ch12.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">12. </span>Interactive Data Visualizations and Dashboards</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction-what-makes-for-a-good-data-visualization">11.1. Introduction: What Makes For a Good Data Visualization?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#aesthetics-data-and-scales">11.1.1. Aesthetics, Data, and Scales</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#edward-tufte-s-fundamental-principles-of-analytical-design">11.1.2. Edward Tufte’s “Fundamental Principles of Analytical Design”</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#claus-o-wilke-s-guide-to-telling-a-story-and-making-a-point">11.1.3. Claus O. Wilke’s Guide to Telling a Story and Making a Point</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-not-to-lie-with-statistics">11.1.4. How (not) to Lie with Statistics</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-not-pie-charts">11.1.5. Why Not Pie Charts?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-data-visualizations-in-python">11.2. Creating Data Visualizations in Python</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#barplots-and-how-to-use-matplotlib-seaborn-and-the-dataframe-plot-method">11.2.1. Barplots and How to Use <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>, and the Dataframe <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> Method</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#vertical-and-horizontal-barplots-figure-size-labels-titles-and-colors">11.2.1.1. Vertical and Horizontal Barplots, Figure Size, Labels, Titles, and Colors</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#barplots-for-statistics-other-than-frequencies">11.2.1.2. Barplots for Statistics Other Than Frequencies</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#annotating-bars-with-values">11.2.1.3. Annotating Bars with Values</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#grouped-and-stacked-bars">11.2.1.4. Grouped and Stacked Bars</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#placing-graphs-within-grids">11.2.1.5. Placing Graphs Within Grids</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#saving-a-figure-as-a-local-file">11.2.1.6. Saving a Figure as a Local File</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scatterplots">11.2.2. Scatterplots</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#using-colors-shapes-and-transparency-to-annotate-scatterplots">11.2.2.1. Using Colors, Shapes, and Transparency to Annotate Scatterplots</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#including-lines-of-best-fit">11.2.2.2. Including Lines of Best Fit</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scatterplot-grids-and-matrices">11.2.2.3. Scatterplot Grids and Matrices</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#line-plots">11.2.3. Line Plots</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#distributional-graphs">11.2.4. Distributional Graphs</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#histograms">11.2.4.1. Histograms</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#density-plots">11.2.4.2. Density Plots</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#violin-plots">11.2.4.3. Violin Plots</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#boxplots">11.2.4.4. Boxplots</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#heatmaps">11.2.5. Heatmaps</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jonathan Kropko (jkropko@virginia.edu)
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>